<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Java-基础语法 | Trenchance's Home</title><link rel="stylesheet" type="text/css" href="../../../../css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="https://unpkg.com/normalize.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/pure-min.css"><link rel="stylesheet" type="text/css" href="https://unpkg.com/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="https://unpkg.com/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="../../../../favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="../../../../favicon.ico"><link rel="apple-touch-icon" href="../../../../apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="../../../../apple-touch-icon.png"><script type="text/javascript" src="https://unpkg.com/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="https://unpkg.com/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="https://unpkg.com/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Java-基础语法</h1><a id="logo" href="../../../../.">Trenchance's Home</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="../../../../."><i class="fa fa-home"> Home</i></a><a href="../../../../archives/"><i class="fa fa-archive"> Archive</i></a><a href="../../../../about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Java-基础语法</h1><div class="post-meta">2025-07-01</div><div class="post-content"><h1 id="Java-基础语法与算法"><a href="#Java-基础语法与算法" class="headerlink" title="Java 基础语法与算法"></a>Java 基础语法与算法</h1><p>@Trenchance 2025.07.01</p>
<p>[TOC]</p>
<h2 id="命名习惯"><a href="#命名习惯" class="headerlink" title="命名习惯"></a>命名习惯</h2><p><strong>包名</strong>：全小写，禁止大写与下划线。<code>com.example.project</code></p>
<p><strong>类名</strong>：大写驼峰。<code>EmployeeInfo，Car</code></p>
<p><strong>接口</strong>：大写驼峰，形容词、动词。<code>Serializable，Runnable</code></p>
<p><strong>变量，属性</strong>：小写驼峰。<code>totalAmount，count</code></p>
<p><strong>方法</strong>：小写驼峰。<code>getAge()，calculateSalary()</code></p>
<p><strong>常量</strong>：全大写，使用下划线分割。<code>MAX_SIZE</code></p>
<h2 id="main函数"><a href="#main函数" class="headerlink" title="main函数"></a>main函数</h2><p>ide中直接输入main然后回车即可。</p>
<p>或者</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">convert</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Var</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="type">float</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">3.11223344556677f</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">3.11223344556677f</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">l1</span> <span class="operator">=</span> <span class="number">3233422344L</span>;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="number">97</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;一百&quot;</span>;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">        System.out.println(a+b);</span><br><span class="line">        System.out.println(a+str);</span><br><span class="line">        System.out.println(<span class="number">100</span>+<span class="number">3</span>+a+str);</span><br><span class="line">        System.out.println(n1+<span class="string">&quot;\n&quot;</span>+n2);</span><br><span class="line">        System.out.println(l1);</span><br><span class="line"></span><br><span class="line">        <span class="type">double</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">8.1</span>/<span class="number">3</span>;</span><br><span class="line">        System.out.println(num1);</span><br><span class="line"></span><br><span class="line">        System.out.println(c1);</span><br><span class="line"></span><br><span class="line">        <span class="type">char</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="string">&#x27;许&#x27;</span>;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c3</span> <span class="operator">=</span> <span class="number">35768</span>;</span><br><span class="line">        System.out.println((<span class="type">int</span>)c2);</span><br><span class="line">        System.out.println(c3);</span><br><span class="line"></span><br><span class="line">        <span class="type">char</span> c4=<span class="string">&#x27;z&#x27;</span>;</span><br><span class="line">        <span class="type">char</span> c5=<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">        System.out.println((<span class="type">int</span>)c4);</span><br><span class="line">        System.out.println((<span class="type">int</span>)c5);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">100</span><br><span class="line">200</span><br><span class="line">100一百</span><br><span class="line">203一百</span><br><span class="line">3.1122334</span><br><span class="line">3.1122334003448486</span><br><span class="line">3233422344</span><br><span class="line">2.6999999999999997</span><br><span class="line">a</span><br><span class="line">35768</span><br><span class="line">许</span><br><span class="line">122</span><br><span class="line">65</span><br></pre></td></tr></table></figure>

<p>注意：float要加f，long要加L，char等于一个数字指的是ascii码，打印时的+是代表拼接，如果是数字则相加，8.1&#x2F;3会导致精度不够。转换变量类型使用(int)c2这种语法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">convert</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">double</span> d=<span class="number">100</span>;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">100</span>;</span><br><span class="line">        <span class="type">float</span> f=<span class="number">10.1f</span>;</span><br><span class="line">        System.out.println(d+i+f);</span><br><span class="line">        <span class="type">int</span> n1=(<span class="type">int</span>)<span class="number">3.234</span>;</span><br><span class="line">        System.out.println(n1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：210.10000038146973和3。</p>
<p>前者自动转换为最精确，即double。后者强制转换。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StrConvert</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">10</span>;</span><br><span class="line">        <span class="type">double</span> d=<span class="number">10.0</span>;</span><br><span class="line">        <span class="type">float</span> f=<span class="number">10.0f</span>;</span><br><span class="line">        String s1= i+<span class="string">&quot;&quot;</span>;</span><br><span class="line">        String s2= d+<span class="string">&quot;&quot;</span>;</span><br><span class="line">        String s3= f+<span class="string">&quot;&quot;</span>;</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">        System.out.println(s3);</span><br><span class="line"></span><br><span class="line">        String s4=<span class="string">&quot;123&quot;</span>;</span><br><span class="line">        <span class="type">int</span> i1=Integer.parseInt(s4);</span><br><span class="line">        <span class="type">double</span> d1=Double.parseDouble(s4);</span><br><span class="line">        <span class="type">float</span> f1=Float.parseFloat(s4);</span><br><span class="line">        System.out.println(i1);</span><br><span class="line">        System.out.println(d1);</span><br><span class="line">        System.out.println(f1);</span><br><span class="line"></span><br><span class="line">        System.out.println(s4.charAt(<span class="number">0</span>));</span><br><span class="line">        System.out.println(s4.charAt(<span class="number">1</span>));</span><br><span class="line">        System.out.println(s4.charAt(<span class="number">2</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">10.0</span><br><span class="line">10.0</span><br><span class="line">123</span><br><span class="line">123.0</span><br><span class="line">123.0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<p>注意，charAt参数是数组的下标索引。charAt是String的方法。</p>
<p>两种int转换为String的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo8</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> a=<span class="number">10</span>;</span><br><span class="line">        String b=Integer.toString(a);</span><br><span class="line">        System.out.println(b);</span><br><span class="line"></span><br><span class="line">        StringBuilder sb=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        sb.append(a);</span><br><span class="line">        System.out.println(sb);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="自增i"><a href="#自增i" class="headerlink" title="自增i++"></a>自增i++</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoInc</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> j;</span><br><span class="line">        j=i++;</span><br><span class="line">        System.out.println(i++);</span><br><span class="line">        System.out.println(j+<span class="string">&quot;\n&quot;</span>+i);</span><br><span class="line"></span><br><span class="line">        j=++i;</span><br><span class="line">        System.out.println(j+<span class="string">&quot;\n&quot;</span>+i);</span><br><span class="line"></span><br><span class="line">        i=i++;</span><br><span class="line">        System.out.println(i);</span><br><span class="line"></span><br><span class="line">        i=++i;</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">4</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure>

<p>j&#x3D;i++;先把i赋值给j，再对i自增。</p>
<p>j&#x3D;++i;先自增，再赋值给j和i。</p>
<p>i&#x3D;i++不会让i自增。</p>
<h2 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h2><p>&amp;和&amp;&amp;不同。</p>
<p>&amp;&amp;如果看到前面错误，就不执行后面的条件。</p>
<p>&amp;会把所有条件都执行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Logic</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">20</span>;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">10</span> &amp;&amp; i++&gt;<span class="number">20</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;yes1&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(i);</span><br><span class="line"></span><br><span class="line">        i=<span class="number">20</span>;</span><br><span class="line">        <span class="keyword">if</span> (i&lt;<span class="number">10</span> &amp; i++&gt;<span class="number">20</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;yes2&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">20</span><br><span class="line">21</span><br></pre></td></tr></table></figure>



<h2 id="三目运算"><a href="#三目运算" class="headerlink" title="三目运算"></a>三目运算</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThereOp</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> a&gt;b?a:b;</span><br><span class="line">        <span class="type">int</span> <span class="variable">Max</span> <span class="operator">=</span> max&gt;c?max:c;</span><br><span class="line">        System.out.println(Max);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">max2</span> <span class="operator">=</span> (a&gt;b?a:b)&gt;c?(a&gt;b?a:b):c;</span><br><span class="line">        System.out.println(max2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出都是30。</p>
<h2 id="键盘输入"><a href="#键盘输入" class="headerlink" title="键盘输入"></a>键盘输入</h2><p><code>java.util.Scanner</code></p>
<p>如果输入以空格分开，用scanner.next()。</p>
<p>int用scanner.nextInt()</p>
<p>只想读一个char，用System.in.read()获得ascii码再显示转换。注意用try-catch包裹。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScanInput</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.println(age);</span><br><span class="line"></span><br><span class="line">        <span class="type">char</span> a=scanner.next().charAt(<span class="number">0</span>);</span><br><span class="line">        System.out.println(a);</span><br><span class="line"></span><br><span class="line">        String b=scanner.next();</span><br><span class="line">        System.out.println(b);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">ascii</span> <span class="operator">=</span> System.in.read();</span><br><span class="line">            System.out.println((<span class="type">char</span>)ascii);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输入输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">77686</span><br><span class="line">77686</span><br><span class="line">khkjhkjh</span><br><span class="line">k</span><br><span class="line">hjghjg hghjg hghgjhjg jhgjg</span><br><span class="line">hjghjg</span><br><span class="line">asdsdas</span><br><span class="line">a</span><br></pre></td></tr></table></figure>



<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><p>switch，记得break</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> scanner.next().charAt(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">switch</span> (c) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;b&#x27;</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;other&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>for</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>((i%<span class="number">9</span>==<span class="number">0</span>)&amp;&amp;(i!=<span class="number">0</span>))&#123;</span><br><span class="line">                System.out.println(i);</span><br><span class="line">                count+=<span class="number">1</span>;</span><br><span class="line">                sum+=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(count+<span class="string">&quot; &quot;</span>+sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>continue，break</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CoBr</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">            <span class="keyword">if</span> (i==<span class="number">2</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;execute&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">            <span class="keyword">if</span> (i==<span class="number">2</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;execute&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">execute</span><br><span class="line">1</span><br><span class="line">execute</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">execute</span><br><span class="line">0</span><br><span class="line">execute</span><br><span class="line">1</span><br><span class="line">execute</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<p>continue跳过这次循环。</p>
<p>break直接出这个循环。</p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>声明形如：int[] arr&#x3D;{7,5,3,4,12,45,10,6,1,0};</p>
<p>或者int[] a1&#x3D;{0,1,2};</p>
<p>int[] a2&#x3D;new int[a1.length];</p>
<p>冒泡排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr=&#123;<span class="number">7</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">12</span>,<span class="number">45</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="type">int</span> n=arr.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=n-<span class="number">1</span>;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;i;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[j]&gt;arr[j+<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                    arr[j]=arr[j+<span class="number">1</span>];</span><br><span class="line">                    arr[j+<span class="number">1</span>]=temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;n;k++)&#123;</span><br><span class="line">                System.out.print(arr[k]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>数组赋值。因为数组代表地址，修改一个原来的也会改。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayAttr</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] a=&#123;<span class="string">&quot;aa&quot;</span>,<span class="string">&quot;bb&quot;</span>&#125;;</span><br><span class="line">        String[] b=a;</span><br><span class="line">        System.out.println(a[<span class="number">0</span>]+a[<span class="number">1</span>]);</span><br><span class="line">        System.out.println(b[<span class="number">0</span>]+b[<span class="number">1</span>]);</span><br><span class="line">        </span><br><span class="line">        b[<span class="number">0</span>]=<span class="string">&quot;cc&quot;</span>;</span><br><span class="line">        System.out.println(a[<span class="number">0</span>]+a[<span class="number">1</span>]);</span><br><span class="line">        System.out.println(b[<span class="number">0</span>]+b[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">aabb</span><br><span class="line">aabb</span><br><span class="line">ccbb</span><br><span class="line">ccbb</span><br></pre></td></tr></table></figure>

<p>数组copy，逐元素赋值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayCopy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a1=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[] a2=<span class="keyword">new</span> <span class="title class_">int</span>[a1.length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;a1.length;i++)&#123;</span><br><span class="line">            a2[i]=a1[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;a2.length;i++)&#123;</span><br><span class="line">            System.out.println(a2[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><h3 id="String向int转换"><a href="#String向int转换" class="headerlink" title="String向int转换"></a>String向int转换</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> year=Integer.parseInt(date.substring(<span class="number">0</span>,<span class="number">4</span>));</span><br></pre></td></tr></table></figure>

<h3 id="子串"><a href="#子串" class="headerlink" title="子串"></a>子串</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> year=Integer.parseInt(date.substring(<span class="number">0</span>,<span class="number">4</span>));</span><br></pre></td></tr></table></figure>

<p>指的是下标0，1，2，3.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> month=Integer.parseInt((date.substring(<span class="number">5</span>,<span class="number">7</span>)));</span><br></pre></td></tr></table></figure>

<p>指的是下标5，6.</p>
<h3 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h3><p>StringBuilder效率高速度快。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SbTest</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        StringBuilder sb=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        sb.append(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        System.out.println(sb.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出12.</p>
<p>sb还有别的方法比如逆序，sb.reverse().toString();</p>
<p>将 <code>String</code> 转换为 <code>StringBuilder</code> 很简单：直接使用 <code>StringBuilder</code> 的构造函数，传入 <code>String</code> 对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将 String 转换为 StringBuilder</span></span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(str);</span><br></pre></td></tr></table></figure>

<p>StringBuilder也有<code>charAt</code>方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringBuilderTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String str=<span class="string">&quot;我爱中国我爱Java&quot;</span>;</span><br><span class="line">        StringBuilder sb=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>(str);</span><br><span class="line">        sb.append(<span class="string">&quot;我爱Python&quot;</span>);</span><br><span class="line">        System.out.println(sb);<span class="comment">//我爱中国我爱Java我爱Python,sb可以直接输出</span></span><br><span class="line">        System.out.println(sb.charAt(<span class="number">4</span>));<span class="comment">//我</span></span><br><span class="line">        str=sb.toString();</span><br><span class="line">        System.out.println(str);<span class="comment">//我爱中国我爱Java我爱Python</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="charAt"><a href="#charAt" class="headerlink" title="charAt"></a>charAt</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">removeTrailingZeros</span><span class="params">(String num)</span> &#123;</span><br><span class="line">        <span class="type">int</span> i=num.length();</span><br><span class="line">        <span class="keyword">while</span> (i&gt;<span class="number">0</span>&amp;&amp;num.charAt(i-<span class="number">1</span>)==<span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num.substring(<span class="number">0</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>charAt是String的方法，返回值为一个char。char用单引号包裹，String用双引号包裹。</p>
<h3 id="String和char数组的相互转换"><a href="#String和char数组的相互转换" class="headerlink" title="String和char数组的相互转换"></a>String和char数组的相互转换</h3><p>String到char数组：<code>char[] arr = s.toCharArray();</code></p>
<p>char数组到String：<code>new String(arr);</code>务必注意不是toString。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSmallestString</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">char</span>[] arr = s.toCharArray();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i + <span class="number">1</span> &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &gt; arr[i + <span class="number">1</span>] &amp;&amp; arr[i] % <span class="number">2</span> == arr[i + <span class="number">1</span>] % <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="type">char</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">                arr[i] = arr[i + <span class="number">1</span>];</span><br><span class="line">                arr[i + <span class="number">1</span>] = temp;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(arr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="String和byte数组的相互转换"><a href="#String和byte数组的相互转换" class="headerlink" title="String和byte数组的相互转换"></a>String和byte数组的相互转换</h3><p>String到byte数组：<code>byte[] byteArray = str.getBytes();</code></p>
<p>byte数组到String：<code>new String(byteArray);</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用指定的字符集（UTF-8）将 String 转换为 byte[]</span></span><br><span class="line"><span class="type">byte</span>[] byteArray = str.getBytes(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"><span class="comment">// 使用平台默认字符集将 String 转换为 byte[]</span></span><br><span class="line"><span class="type">byte</span>[] byteArray = str.getBytes();</span><br><span class="line"><span class="comment">// 使用平台默认字符集将 byte[] 转换为 String</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(byteArray);</span><br><span class="line"><span class="comment">// 使用指定字符集（UTF-8）将 byte[] 转换为 String</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(byteArray, <span class="string">&quot;UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h3><p>如大小写转换，以及分割字符串。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringBuilderTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String str=<span class="string">&quot;我爱中国 我爱Java &quot;</span>;</span><br><span class="line">        StringBuilder sb=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>(str);</span><br><span class="line">        sb.append(<span class="string">&quot;我爱Python&quot;</span>);</span><br><span class="line">        System.out.println(sb);<span class="comment">//我爱中国 我爱Java 我爱Python,sb可以直接输出</span></span><br><span class="line">        System.out.println(sb.charAt(<span class="number">5</span>));<span class="comment">//我</span></span><br><span class="line">        str=sb.toString();</span><br><span class="line">        System.out.println(str);<span class="comment">//我爱中国 我爱Java 我爱Python</span></span><br><span class="line">        System.out.println(str.toUpperCase());<span class="comment">//我爱中国 我爱JAVA 我爱PYTHON</span></span><br><span class="line">        </span><br><span class="line">        String[] str2=str.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(String s:str2)&#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        我爱中国</span></span><br><span class="line"><span class="comment">        我爱Java</span></span><br><span class="line"><span class="comment">        我爱Python</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="String，char-，char，int-转换总结"><a href="#String，char-，char，int-转换总结" class="headerlink" title="String，char[]，char，int 转换总结"></a>String，char[]，char，int 转换总结</h2><p>▶ String → char数组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="type">char</span>[] charArray = str.toCharArray(); <span class="comment">// 方法1</span></span><br><span class="line"><span class="type">char</span>[] charArray2 = <span class="keyword">new</span> <span class="title class_">char</span>[str.length()];</span><br><span class="line">str.getChars(<span class="number">0</span>, str.length(), charArray2, <span class="number">0</span>); <span class="comment">// 方法2 (复制到目标数组)</span></span><br></pre></td></tr></table></figure>

<p>▶ String → char (获取单个字符)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;A&quot;</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> str.charAt(<span class="number">0</span>); <span class="comment">// 获取索引0处的字符</span></span><br></pre></td></tr></table></figure>

<p>▶ String → int (解析字符串为整数)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> Integer.parseInt(str); <span class="comment">// 方法1 (常用)</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> Integer.valueOf(str); <span class="comment">// 方法2 (返回Integer对象，自动拆箱)</span></span><br></pre></td></tr></table></figure>

<p>▶ char数组 → String</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span>[] charArray = &#123;<span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;o&#x27;</span>&#125;;</span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(charArray); <span class="comment">// 方法1 (构造函数)</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> String.valueOf(charArray); <span class="comment">// 方法2 (推荐)</span></span><br></pre></td></tr></table></figure>

<p>▶ char数组 → char (直接访问)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span>[] charArray = &#123;<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>&#125;;</span><br><span class="line"><span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> charArray[<span class="number">0</span>]; <span class="comment">// 访问索引0的元素 (&#x27;A&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>▶ char数组 → int (需先转为String再解析)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span>[] charArray = &#123;<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> Integer.parseInt(<span class="keyword">new</span> <span class="title class_">String</span>(charArray)); <span class="comment">// 转为String后解析</span></span><br></pre></td></tr></table></figure>

<p>▶ char → String</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> String.valueOf(c); <span class="comment">// 方法1 (推荐)</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> Character.toString(c); <span class="comment">// 方法2</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span> + c; <span class="comment">// 方法3 (简洁但效率略低)</span></span><br></pre></td></tr></table></figure>

<p>▶ char → int (获取Unicode值)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">unicode</span> <span class="operator">=</span> (<span class="type">int</span>) c; <span class="comment">// 得到65 (Unicode值)</span></span><br><span class="line"><span class="type">int</span> <span class="variable">digitValue</span> <span class="operator">=</span> c - <span class="string">&#x27;0&#x27;</span>; <span class="comment">// 数字字符转数值 (如 &#x27;7&#x27; → 7)</span></span><br></pre></td></tr></table></figure>

<p>▶ char → char数组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&#x27;X&#x27;</span>;</span><br><span class="line"><span class="type">char</span>[] charArray = &#123;c&#125;; <span class="comment">// 创建单元素数组</span></span><br><span class="line"><span class="type">char</span>[] charArray2 = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1</span>];</span><br><span class="line">charArray2[<span class="number">0</span>] = c; <span class="comment">// 赋值到数组</span></span><br></pre></td></tr></table></figure>

<p>▶ int → String</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">123</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> String.valueOf(num); <span class="comment">// 方法1 (推荐)</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> Integer.toString(num); <span class="comment">// 方法2</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span> + num; <span class="comment">// 方法3 (简洁)</span></span><br></pre></td></tr></table></figure>

<p>▶ int → char (Unicode转字符)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">unicode</span> <span class="operator">=</span> <span class="number">65</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> (<span class="type">char</span>) unicode; <span class="comment">// 得到 &#x27;A&#x27; (需显式转型)</span></span><br></pre></td></tr></table></figure>

<p>▶ int → char数组 (需先转为String)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">123</span>;</span><br><span class="line"><span class="type">char</span>[] charArray = Integer.toString(num).toCharArray(); <span class="comment">// &quot;123&quot; → [&#x27;1&#x27;,&#x27;2&#x27;,&#x27;3&#x27;]</span></span><br></pre></td></tr></table></figure>



<h2 id="String与常量池"><a href="#String与常量池" class="headerlink" title="String与常量池"></a>String与常量池</h2><h2 id="Integer"><a href="#Integer" class="headerlink" title="Integer"></a>Integer</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IntegerUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> num=Integer.parseInt(<span class="string">&quot;123&quot;</span>);<span class="comment">//String-&gt;int</span></span><br><span class="line">        Integer i=Integer.valueOf(<span class="string">&quot;123&quot;</span>);<span class="comment">//String-&gt;Integer</span></span><br><span class="line">        System.out.println(i.equals(num));<span class="comment">//true</span></span><br><span class="line">        System.out.println(Integer.toBinaryString(<span class="number">123</span>));</span><br><span class="line">        System.out.println(Integer.toHexString(i));</span><br><span class="line">        System.out.println(Integer.toString(i, <span class="number">10</span>));<span class="comment">//指定基数转为String</span></span><br><span class="line">        System.out.println(Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h2><p>在 Java 中，<code>Number</code> 是一个抽象类，位于 <code>java.lang</code> 包中，它是所有数值类（如 <code>Integer</code>、<code>Double</code>、<code>Long</code> 等）的父类。<code>Number</code> 类为 Java 中所有数字类型提供了一个通用的基类，并提供了一些基础的操作和方法。这些方法通常用于将数字从一种类型转换为另一种类型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Number</span> <span class="variable">num</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">10</span>);</span><br><span class="line"><span class="type">byte</span> <span class="variable">b</span> <span class="operator">=</span> num.byteValue(); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>



<h2 id="DecimalFormat-格式化数字与科学计数法"><a href="#DecimalFormat-格式化数字与科学计数法" class="headerlink" title="DecimalFormat 格式化数字与科学计数法"></a>DecimalFormat 格式化数字与科学计数法</h2><p><code>DecimalFormat</code> 是 Java 中用于格式化数字输出的类，位于 <code>java.text</code> 包中。</p>
<p>首先介绍非格式化数字：如果数据绝对值小于0.001或者大于10000000，使用科学记数法表示。在 Java 中，<code>float</code> 和 <code>double</code> 类型支持科学计数法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FormatUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">double</span> d=<span class="number">0.00000001</span>;</span><br><span class="line">        <span class="type">float</span> f=<span class="number">10000000000f</span>;</span><br><span class="line">        System.out.println(d);<span class="comment">//输出为1.0E-8</span></span><br><span class="line">        System.out.println(f);<span class="comment">//输出为1.0E10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>1.23e7</code> 代表 <code>1.23 × 10^7</code>，即 <code>12300000</code>。</p>
<p><code>1.23e-6</code> 代表 <code>1.23 × 10^(-6)</code>，即 <code>0.00000123</code>。</p>
<p>DecimalFormat类是NumberFormat的一个子类，用于格式化十进制数字，主要是浮点数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.DecimalFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FormatUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        DecimalFormat df=<span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;#,###.00&quot;</span>);</span><br><span class="line">        <span class="type">float</span> f=<span class="number">1234567.123456f</span>;</span><br><span class="line">        String n=df.format(f);</span><br><span class="line">        System.out.println(n);<span class="comment">//1,234,567.12</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h2><p>位于 <code>java.lang</code> 包下。</p>
<p>可以使用常量<code>Math.PI</code> <code> Math.E</code></p>
<p><code>Math.pow(a, b)</code>：返回 <code>a</code> 的 <code>b</code> 次方（<code>a^b</code>）。</p>
<p><code>Math.sqrt(x)</code>：返回 <code>x</code> 的平方根。</p>
<p><code>Math.log(x)</code>：返回 <code>x</code> 的自然对数（以 <code>e</code> 为底）。</p>
<p><code>Math.log10(x)</code>：返回 <code>x</code> 的以 10 为底的对数。</p>
<h2 id="BigInteger-和-BigDecimal"><a href="#BigInteger-和-BigDecimal" class="headerlink" title="BigInteger 和 BigDecimal"></a>BigInteger 和 BigDecimal</h2><p>用于处理任意精度的整数。大于long的精度。</p>
<p>创建对象的两种方法：</p>
<p><strong>通过字符串</strong>：使用构造函数将字符串转换为 <code>BigInteger</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigInteger</span> <span class="variable">bigInt1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;1234567890123456789012345678901234567890&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>通过整数值</strong>：通过 <code>valueOf()</code> 静态方法将基本数据类型转换为 <code>BigInteger</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigInteger</span> <span class="variable">bigInt2</span> <span class="operator">=</span> BigInteger.valueOf(<span class="number">12345</span>);</span><br></pre></td></tr></table></figure>

<p>下面是计算使用方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BigIntTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        BigInteger b1=<span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;1234567890123456789012345678901234567890&quot;</span>);</span><br><span class="line">        BigInteger b2=BigInteger.valueOf(<span class="number">123456789123456789L</span>);</span><br><span class="line">        BigInteger ans=b1.divide(b2);</span><br><span class="line">        System.out.println(b1+<span class="string">&quot;/&quot;</span>+b2+<span class="string">&quot;=&quot;</span>+ans);</span><br><span class="line">        <span class="comment">//1234567890123456789012345678901234567890/123456789123456789=9999999991000000009099</span></span><br><span class="line">        <span class="type">long</span> l= ans.longValue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>计算：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigInteger</span> <span class="variable">result</span> <span class="operator">=</span> a.subtract(b);</span><br></pre></td></tr></table></figure>

<p>转换基本数据类型：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">intValue</span> <span class="operator">=</span> a.intValue();</span><br></pre></td></tr></table></figure>

<p>BigDecimal支持任意精度的小数运算:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">bd1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;10.5&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">bd2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;5.5&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">sum</span> <span class="operator">=</span> bd1.add(bd2);</span><br></pre></td></tr></table></figure>



<h2 id="类的构造方法"><a href="#类的构造方法" class="headerlink" title="类的构造方法"></a>类的构造方法</h2><p>构造器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConstructorUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Person5 p=<span class="keyword">new</span> <span class="title class_">Person5</span>(<span class="string">&quot;asd&quot;</span>,<span class="number">13</span>);</span><br><span class="line">        Person5 p1=<span class="keyword">new</span> <span class="title class_">Person5</span>(<span class="string">&quot;wer&quot;</span>);</span><br><span class="line">        System.out.println(p.age+<span class="string">&quot; &quot;</span>+ p1.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person5</span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person5</span><span class="params">(String name,<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">        <span class="built_in">this</span>.age=age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person5</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，构造方法没有返回值，要写<code>public Person5(String name,int age)</code>而不是<code>public void Person5(String name,int age)</code></p>
<h2 id="面向对象三大特性"><a href="#面向对象三大特性" class="headerlink" title="面向对象三大特性"></a>面向对象三大特性</h2><p>封装：客观事物封装为类。</p>
<p>继承：使用现有类的功能，并在无需重新编写类的情况下进行扩展。</p>
<p>多态：同一个属性或方法在父类和子类中具有不同的含义。</p>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Object1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">xiaoming</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        xiaoming.age=<span class="number">10</span>;</span><br><span class="line">        xiaoming.name=<span class="string">&quot;abc&quot;</span>;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">xiaohong</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        xiaohong=xiaoming;</span><br><span class="line">        xiaohong.name=<span class="string">&quot;xiaohong&quot;</span>;</span><br><span class="line">        System.out.println(xiaoming.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出为xiaohong，这和数组是一个道理，是引用类型，而不是常量型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjectMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Person2 person2=<span class="keyword">new</span> <span class="title class_">Person2</span>();</span><br><span class="line">        person2.name=<span class="string">&quot;Jerry&quot;</span>;</span><br><span class="line">        person2.age=<span class="number">18</span>;</span><br><span class="line">        person2.method(person2);</span><br><span class="line">        System.out.println(person2.name);</span><br><span class="line">        person2.method2(person2);</span><br><span class="line">        System.out.println(person2.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person2</span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(Person2 p)</span>&#123;</span><br><span class="line">        p.name=<span class="string">&quot;Tom&quot;</span>;</span><br><span class="line">        p.age=<span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(Person2 p)</span>&#123;</span><br><span class="line">        p=<span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出均为Tom。方法2不会改变原来的对象。</p>
<p>方法重载：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OverMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Num2</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Num2</span>();</span><br><span class="line">        a.add(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">        a.add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">        a.add(<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Num2</span>&#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> n1,<span class="type">int</span> n2)</span>&#123;</span><br><span class="line">        System.out.println(n1+n2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> n1,<span class="type">int</span> n2,<span class="type">int</span> n3)</span>&#123;</span><br><span class="line">        System.out.println(n1+n2+n3);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> n1,<span class="type">double</span> n2)</span>&#123;</span><br><span class="line">        System.out.println(n1+n2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span>...nums)</span>&#123;</span><br><span class="line">        <span class="type">int</span> a=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            a+=nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果方法同名但是参数不一样，可以重载。</p>
<p>注意这里如果我不知道参数有多少，可以用<code>...</code>来实现。</p>
<p>注意一点，在对象中，如果要对比两个对象是否相同，基本数据类型直接用等于号，String等引用类型需要逐个属性使用<code>.equals</code>方法。</p>
<p>向上向下转型：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.up;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;RUN&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;EAT&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;cat run&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cli</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;cat climb&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;dog run&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shut</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;dog shut&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.up;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Animal</span> <span class="variable">cat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();<span class="comment">//向上转型</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">cat2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        cat.eat();<span class="comment">//执行父类的eat</span></span><br><span class="line">        cat.run();<span class="comment">//执行子类的run</span></span><br><span class="line">        <span class="type">Cat</span> <span class="variable">cat3</span> <span class="operator">=</span> (Cat) cat;<span class="comment">//向下转型</span></span><br><span class="line">        cat3.cli();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>运行时多态：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjUse2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        B b=<span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">        System.out.println(b.count);</span><br><span class="line">        b.method();</span><br><span class="line"></span><br><span class="line">        A a=b;</span><br><span class="line">        System.out.println(a==b);</span><br><span class="line">        a.method2(<span class="number">15</span>);</span><br><span class="line">        System.out.println(a.count);</span><br><span class="line">        a.method();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="type">int</span> count=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="built_in">this</span>.count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(<span class="type">int</span> count)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.count=count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="type">int</span> count=<span class="number">20</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="built_in">this</span>.count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">20</span><br><span class="line">20</span><br><span class="line">true</span><br><span class="line">15</span><br><span class="line">20</span><br></pre></td></tr></table></figure>

<p>A a&#x3D;b; <strong>编译看左边，运行看右边</strong>。</p>
<p>System.out.println(a.count);为编译，看左边，为A，即15。</p>
<p>a.method();是运行，看右边，为b，即20。</p>
<p>再来一个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjUse3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        BB bb=<span class="keyword">new</span> <span class="title class_">BB</span>();</span><br><span class="line">        System.out.println(bb.i);</span><br><span class="line">        System.out.println(bb.sum());</span><br><span class="line">        AA aa=bb;</span><br><span class="line">        System.out.println(aa.i);</span><br><span class="line">        System.out.println(aa.sum());</span><br><span class="line">        System.out.println(aa.sum2());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AA</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> i=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i+<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getI()+<span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getI</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BB</span> <span class="keyword">extends</span> <span class="title class_">AA</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> i=<span class="number">20</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i+<span class="number">30</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    public int sum2()&#123;</span></span><br><span class="line"><span class="comment">//        return getI()+40;</span></span><br><span class="line"><span class="comment">//    &#125;  //若不注释，输出为60</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getI</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">20</span><br><span class="line">50</span><br><span class="line">10</span><br><span class="line">50</span><br><span class="line">40</span><br></pre></td></tr></table></figure>

<p><strong>对象字段是静态绑定，不支持多态，看原本的对象类型。</strong></p>
<p><strong>方法是动态绑定，支持多态，看现在指向的对象类型。</strong></p>
<p><strong>属性编译时确定，方法执行时确定。</strong></p>
<p>最后一个输出为40。这里的getI也是动态绑定，绑定的是bb的getI。如果把bb的getI也注释掉，那就是30。</p>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><p><img src="image-20250708153127887.png"></p>
<p><img src="image-20250708153145476.png"></p>
<p>类变量。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassVar</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Child c1=<span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        c1.join();</span><br><span class="line">        Child c2=<span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">        c2.join();</span><br><span class="line">        System.out.println(Child.count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> count;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Child</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">join</span><span class="params">()</span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>static是类变量，属于类的变量，不属于对象。</p>
<p>普通方法可以获取静态变量，不要加this。</p>
<p>注意final修饰符，final修饰的变量一定要赋初值。一旦赋值就不可改变。</p>
<p>final修饰一个方法，那么这个方法不能被重写。</p>
<p>final修饰一个类，这个类不能被继承。</p>
<h2 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> count;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Child</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">join</span><span class="params">()</span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用大括号括起来。</p>
<p>代码块（Code Block） 是一组用花括号 {} 括起来的语句。它的主要作用是组织语句，并限定变量的作用域。静态代码块（Static Block） 是一种特殊类型的代码块，它具有特殊的执行时机和限制。</p>
<p><strong>局部代码块 (Local Block&#x2F;Initializer Block)<strong>：在</strong>方法内部</strong>或构造器内部独立的 <code>&#123;&#125;</code> 块。主要用于限定局部变量的作用域，使其在代码块结束后自动销毁，节省内存。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">anotherMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    &#123; <span class="comment">// 局部代码块开始</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> <span class="number">20</span>; <span class="comment">// 局部变量y，只在该代码块内有效</span></span><br><span class="line">        System.out.println(<span class="string">&quot;这是一个局部代码块，y = &quot;</span> + y);</span><br><span class="line">    &#125; <span class="comment">// 局部代码块结束，y在此处销毁</span></span><br><span class="line">    <span class="comment">// System.out.println(y); // 编译错误：y cannot be resolved to a variable</span></span><br><span class="line">    System.out.println(<span class="string">&quot;局部代码块外部&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>**构造代码块 (Initializer Block&#x2F;Instance Initializer Block)**：</p>
<p>直接定义在类中，没有 <code>static</code> 关键字修饰的代码块。它在<strong>每次创建对象时</strong>都会执行，并且在构造函数之前执行。主要用于初始化实例变量，无论哪个构造器被调用，它都<strong>会在构造器之前执行</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="type">int</span> instanceVar;</span><br><span class="line"></span><br><span class="line">    &#123; <span class="comment">// 构造代码块开始</span></span><br><span class="line">        System.out.println(<span class="string">&quot;构造代码块执行了。&quot;</span>);</span><br><span class="line">        instanceVar = <span class="number">100</span>; <span class="comment">// 初始化实例变量</span></span><br><span class="line">    &#125; <span class="comment">// 构造代码块结束</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;无参构造函数执行了。instanceVar = &quot;</span> + instanceVar);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;有参构造函数执行了。instanceVar = &quot;</span> + instanceVar);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InitializerBlockDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyClass</span> <span class="variable">obj1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>(); <span class="comment">// 输出: 构造代码块执行了。, 无参构造函数执行了。</span></span><br><span class="line">        System.out.println(<span class="string">&quot;---&quot;</span>);</span><br><span class="line">        <span class="type">MyClass</span> <span class="variable">obj2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>(<span class="string">&quot;Test&quot;</span>); <span class="comment">// 输出: 构造代码块执行了。, 有参构造函数执行了。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>静态代码块是用 <code>static</code> 关键字修饰的代码块。它直接定义在类中，不属于任何方法或构造器。</p>
<p> 静态代码块在<strong>类加载时</strong>执行，并且<strong>只执行一次</strong>。当一个类第一次被加载到 JVM 时（例如，通过 <code>new</code> 关键字创建该类的实例，或者第一次调用该类的静态成员），静态代码块就会被执行。</p>
<p> 静态代码块优先于构造代码块、构造函数和任何实例方法的执行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> String university;</span><br><span class="line">    <span class="keyword">static</span> &#123; <span class="comment">// 静态代码块开始</span></span><br><span class="line">        System.out.println(<span class="string">&quot;--- 静态代码块执行了（Student类被加载）---&quot;</span>);</span><br><span class="line">        university = <span class="string">&quot;清华大学&quot;</span>; <span class="comment">// 初始化静态变量</span></span><br><span class="line">        <span class="comment">// instanceName = &quot;张三&quot;; // 编译错误！不能访问非静态成员</span></span><br><span class="line">        System.out.println(<span class="string">&quot;大学名称初始化为: &quot;</span> + university);</span><br><span class="line">    &#125; <span class="comment">// 静态代码块结束</span></span><br><span class="line"></span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line">    &#123; <span class="comment">// 构造代码块</span></span><br><span class="line">        System.out.println(<span class="string">&quot;--- 构造代码块执行了 ---&quot;</span>);</span><br><span class="line">        name = <span class="string">&quot;默认姓名&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--- 构造函数执行了 ---&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;姓名: &quot;</span> + name + <span class="string">&quot;, ID: &quot;</span> + id + <span class="string">&quot;, 学校: &quot;</span> + university);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StaticBlockDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;开始执行 main 方法...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第一次访问Student类，静态代码块会被执行</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">101</span>);</span><br><span class="line">        s1.display();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;\n--- 创建第二个学生对象 ---&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 第二次创建对象，静态代码块不会再执行</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">102</span>);</span><br><span class="line">        s2.display();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 也可以通过访问静态成员来触发类加载和静态代码块执行</span></span><br><span class="line">        <span class="comment">// System.out.println(Student.university);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">开始执行 main 方法...</span><br><span class="line">--- 静态代码块执行了（Student类被加载）---</span><br><span class="line">大学名称初始化为: 清华大学</span><br><span class="line">--- 构造代码块执行了 ---</span><br><span class="line">--- 构造函数执行了 ---</span><br><span class="line">姓名: 张三, ID: 101, 学校: 清华大学</span><br><span class="line"></span><br><span class="line">--- 创建第二个学生对象 ---</span><br><span class="line">--- 构造代码块执行了 ---</span><br><span class="line">--- 构造函数执行了 ---</span><br><span class="line">姓名: 李四, ID: 102, 学校: 清华大学</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<table>
<thead>
<tr>
<th align="left">特性</th>
<th align="left">代码块（非静态&#x2F;实例代码块）</th>
<th align="left">静态代码块（Static Block）</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>关键字</strong></td>
<td align="left">无</td>
<td align="left"><code>static</code></td>
</tr>
<tr>
<td align="left"><strong>位置</strong></td>
<td align="left">类中，无修饰符；方法或构造器内部</td>
<td align="left">类中，用 <code>static</code> 修饰</td>
</tr>
<tr>
<td align="left"><strong>执行时机</strong></td>
<td align="left"><strong>实例代码块：</strong> 每次创建对象实例时执行，在构造器之前</td>
<td align="left"><strong>类加载时</strong>执行，且<strong>只执行一次</strong></td>
</tr>
<tr>
<td align="left"><strong>目的</strong></td>
<td align="left"><strong>实例代码块：</strong> 初始化实例变量，统一构造器中的初始化逻辑</td>
<td align="left">初始化静态变量，执行类级别的单次配置或加载</td>
</tr>
<tr>
<td align="left"><strong>访问成员</strong></td>
<td align="left">可以访问静态成员和实例成员</td>
<td align="left"><strong>只能访问静态成员</strong>，不能访问实例成员（因为实例可能尚未存在）</td>
</tr>
<tr>
<td align="left"><strong><code>this</code> 关键字</strong></td>
<td align="left">可以使用 <code>this</code></td>
<td align="left">不能使用 <code>this</code></td>
</tr>
<tr>
<td align="left"><strong>作用域</strong></td>
<td align="left">局部代码块：内部可见；实例代码块：对整个实例有效</td>
<td align="left">对整个类有效</td>
</tr>
</tbody></table>
<p>代码块执行顺序<strong>静态代码块——&gt; 构造代码块 ——&gt; 构造函数——&gt; 普通代码块</strong> </p>
<p>继承中代码块执行顺序：<strong>父类静态块——&gt;子类静态块——&gt;父类代码块——&gt;父类构造器——&gt;子类代码块——&gt;子类构造器</strong></p>
<h2 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h2><p>Java容器，包括集合（Collection）和键值对（Map）。</p>
<ol>
<li>Collection包括 List，Queue，Set。</li>
<li>Map包括 HashMap，TreeMap。</li>
</ol>
<ul>
<li>Set代表无序（HashSet）、不可重复的集合. HashSet, TreeSet</li>
<li>List代表有序、重复的集合. ArrayList, LinkedList</li>
<li>Map键值对，key无序不可重复. HashMap, TreeMap</li>
<li>Queue有先后顺序，可重复的. LinkedList, PriorityQueue</li>
</ul>
<p>注意：<code>LinkedList</code>：既实现了 <code>List</code> 接口，也实现了 <code>Deque</code> 接口（双端队列操作，支持队列和栈的操作）。</p>
<table>
<thead>
<tr>
<th>操作</th>
<th><code>LinkedList</code></th>
<th><code>ArrayList</code></th>
</tr>
</thead>
<tbody><tr>
<td><strong>插入元素</strong></td>
<td>在头部和尾部高效（O(1)），中间较慢（O(n)）</td>
<td>在末尾高效（O(1)），中间需要移动元素（O(n)）</td>
</tr>
<tr>
<td><strong>删除元素</strong></td>
<td>在头部和尾部高效（O(1)），中间较慢（O(n)）</td>
<td>删除中间元素需要移动（O(n)）</td>
</tr>
<tr>
<td><strong>随机访问</strong></td>
<td>较慢（O(n)）</td>
<td>快速（O(1)）</td>
</tr>
<tr>
<td><strong>内存占用</strong></td>
<td>每个元素占用更多内存（需要存储前后指针）</td>
<td>内存占用较小（仅存储数据）</td>
</tr>
</tbody></table>
<h2 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h2><p>List是java.util包下的一个接口，属于Java集合框架的一部分。</p>
<p>List接口继承自Collection接口，允许重复元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个ArrayList实例</span></span><br><span class="line">      List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// 添加元素</span></span><br><span class="line">      list.add(<span class="string">&quot;Apple&quot;</span>);</span><br><span class="line">      list.add(<span class="string">&quot;Banana&quot;</span>);</span><br><span class="line">      list.add(<span class="string">&quot;Cherry&quot;</span>);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// 插入元素</span></span><br><span class="line">      list.add(<span class="number">1</span>, <span class="string">&quot;Apricot&quot;</span>);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// 移除元素</span></span><br><span class="line">      list.remove(<span class="number">2</span>);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// 获取元素</span></span><br><span class="line">      System.out.println(list.get(<span class="number">0</span>));  <span class="comment">// 输出: Apple</span></span><br><span class="line"> </span><br><span class="line">      <span class="comment">// 替换元素</span></span><br><span class="line">      list.set(<span class="number">0</span>, <span class="string">&quot;Avocado&quot;</span>);</span><br><span class="line">      System.out.println(list.get(<span class="number">0</span>));  <span class="comment">// 输出: Avocado</span></span><br><span class="line"> </span><br><span class="line">      <span class="comment">// 其他方法示例</span></span><br><span class="line">      System.out.println(list.size());       <span class="comment">// 输出: 3</span></span><br><span class="line">      System.out.println(list.isEmpty());    <span class="comment">// 输出: false</span></span><br><span class="line">      System.out.println(list.contains(<span class="string">&quot;Banana&quot;</span>));  <span class="comment">// 输出: true</span></span><br><span class="line">      System.out.println(list.indexOf(<span class="string">&quot;Cherry&quot;</span>));   <span class="comment">// 输出: 2</span></span><br><span class="line">      System.out.println(list.lastIndexOf(<span class="string">&quot;Cherry&quot;</span>));  <span class="comment">// 输出: 2</span></span><br><span class="line">      System.out.println(list.subList(<span class="number">0</span>, <span class="number">2</span>));         <span class="comment">// 输出: [Avocado, Banana]</span></span><br></pre></td></tr></table></figure>



<h2 id="嵌套List与矩阵的互相转化"><a href="#嵌套List与矩阵的互相转化" class="headerlink" title="嵌套List与矩阵的互相转化"></a>嵌套List与矩阵的互相转化</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; a=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">            List&lt;Integer&gt; b=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">10</span>;j++)&#123;</span><br><span class="line">                b.add(i+j);</span><br><span class="line">            &#125;</span><br><span class="line">            a.add(b);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[][] c=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>][<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">            List&lt;Integer&gt; b=a.get(i);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">10</span>;j++) &#123;</span><br><span class="line">                c[i][j] = b.get(j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">10</span>;j++)&#123;</span><br><span class="line">                System.out.print(c[i][j]+<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">            List&lt;Integer&gt; b=a.get(i);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">10</span>;j++)&#123;</span><br><span class="line">                System.out.print(b.get(j)+<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h2><p>既可以用作双向链表（LinkedList），也可以用作列表（List），还可以用作栈和队列（Deque）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        LinkedList&lt;Integer&gt; l=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        l.addFirst(<span class="number">1</span>);</span><br><span class="line">        l.addFirst(<span class="number">2</span>);</span><br><span class="line">        l.addFirst(<span class="number">3</span>);</span><br><span class="line">        System.out.println(l.getFirst());<span class="comment">//3</span></span><br><span class="line">        System.out.println(l.getLast());<span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">        List&lt;Integer&gt; li=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        li.add(<span class="number">1</span>);</span><br><span class="line">        li.add(<span class="number">2</span>);</span><br><span class="line">        li.add(<span class="number">3</span>);</span><br><span class="line">        System.out.println(li.get(<span class="number">0</span>));<span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">        Queue&lt;Integer&gt; q=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        q.offer(<span class="number">1</span>);</span><br><span class="line">        q.offer(<span class="number">2</span>);</span><br><span class="line">        q.offer(<span class="number">3</span>);</span><br><span class="line">        System.out.println(q.poll());<span class="comment">//1</span></span><br><span class="line">        System.out.println(q.poll());<span class="comment">//2</span></span><br><span class="line">        System.out.println(q.poll());<span class="comment">//3</span></span><br><span class="line"></span><br><span class="line">        Deque&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        stack.push(<span class="number">1</span>);</span><br><span class="line">        stack.push(<span class="number">2</span>);</span><br><span class="line">        stack.push(<span class="number">3</span>);</span><br><span class="line">        System.out.println(stack.pop());<span class="comment">//3</span></span><br><span class="line">        System.out.println(stack.pop());<span class="comment">//2</span></span><br><span class="line">        System.out.println(stack.pop());<span class="comment">//1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="HashMap-哈希表初步"><a href="#HashMap-哈希表初步" class="headerlink" title="HashMap 哈希表初步"></a>HashMap 哈希表初步</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListUse4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Map&lt;Integer,Integer&gt; m=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer,Integer&gt;();</span><br><span class="line">        m.put(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        m.put(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">        m.put(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">        m.put(<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line">        m.put(<span class="number">2</span>,<span class="number">5</span>);</span><br><span class="line">        Set&lt;Map.Entry&lt;Integer,Integer&gt;&gt; s=m.entrySet();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">            m.put(i, m.getOrDefault(i, <span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(Map.Entry&lt;Integer,Integer&gt; entry : s)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;key:&quot;</span>+entry.getKey()+<span class="string">&quot; value:&quot;</span>+entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;----------&quot;</span>);</span><br><span class="line">        m.put(<span class="number">1</span>,<span class="number">10</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;key:1 value:&quot;</span>+m.get(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">key:0 value:0</span><br><span class="line">key:1 value:2</span><br><span class="line">key:2 value:5</span><br><span class="line">key:3 value:2</span><br><span class="line">key:4 value:0</span><br><span class="line">key:5 value:0</span><br><span class="line">key:6 value:0</span><br><span class="line">key:7 value:0</span><br><span class="line">key:8 value:0</span><br><span class="line">key:9 value:0</span><br><span class="line">----------</span><br><span class="line">key:1 value:10</span><br></pre></td></tr></table></figure>

<p>m.entrySet();可以把Map转化为Set，Set中元素的数据类型是Map.Entry&lt;&gt;。</p>
<p>输出可以使用For-Each写法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (type variable : collection) &#123;</span><br><span class="line">    <span class="comment">// 使用 variable 进行操作</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> num : arr) &#123;</span><br><span class="line">    System.out.println(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="迭代器-Iterator"><a href="#迭代器-Iterator" class="headerlink" title="迭代器 Iterator"></a>迭代器 Iterator</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Map&lt;Integer,Integer&gt; m=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        m.put(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">        m.put(<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">        m.put(<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">        Iterator&lt;Map.Entry&lt;Integer,Integer&gt;&gt; it=m.entrySet().iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">            Map.Entry&lt;Integer,Integer&gt; en=it.next();</span><br><span class="line">            System.out.println(<span class="string">&quot;key:&quot;</span>+en.getKey()+<span class="string">&quot; value:&quot;</span>+en.getValue());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----&quot;</span>);</span><br><span class="line"></span><br><span class="line">        it=m.entrySet().iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">            Map.Entry&lt;Integer,Integer&gt; en=it.next();</span><br><span class="line">            m.put(en.getKey(), en.getValue()+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        it=m.entrySet().iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">            Map.Entry&lt;Integer,Integer&gt; en=it.next();</span><br><span class="line">            System.out.println(<span class="string">&quot;key:&quot;</span>+en.getKey()+<span class="string">&quot; value:&quot;</span>+en.getValue());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">key:1 value:2</span><br><span class="line">key:2 value:3</span><br><span class="line">key:3 value:4</span><br><span class="line">-----</span><br><span class="line">key:1 value:3</span><br><span class="line">key:2 value:4</span><br><span class="line">key:3 value:5</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IteratorUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; l = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        l.add(<span class="string">&quot;ab&quot;</span>);</span><br><span class="line">        l.add(<span class="string">&quot;bc&quot;</span>);</span><br><span class="line">        l.add(<span class="string">&quot;cd&quot;</span>);</span><br><span class="line">        Iterator&lt;String&gt; it=l.iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">            System.out.println(it.next());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ab</span><br><span class="line">bc</span><br><span class="line">cd</span><br></pre></td></tr></table></figure>

<p>过程：</p>
<ol>
<li>获取集合的迭代器。</li>
<li>使用 <code>hasNext()</code> 检查是否有下一个元素。</li>
<li>使用 <code>next()</code> 获取当前元素，并移动到下一个元素。</li>
</ol>
<h2 id="Arrays-sort-自定义排序"><a href="#Arrays-sort-自定义排序" class="headerlink" title="Arrays.sort 自定义排序"></a>Arrays.sort 自定义排序</h2><p>Arrays.sort()本身默认按 Comparable 接口实现排序，如果对象实现了 <code>Comparable</code> 接口（比如 <code>String</code>, <code>Integer</code>），就可以直接使用 <code>Arrays.sort()</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] nums = &#123;<span class="number">5</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">1</span>&#125;;</span><br><span class="line">Arrays.sort(nums); <span class="comment">// 升序排序</span></span><br><span class="line">String[] arr = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;orange&quot;</span>&#125;;</span><br><span class="line">Arrays.sort(arr); <span class="comment">// 按字典序升序</span></span><br></pre></td></tr></table></figure>

<h3 id="方法一：Comparator自定义排序"><a href="#方法一：Comparator自定义排序" class="headerlink" title="方法一：Comparator自定义排序"></a>方法一：Comparator自定义排序</h3><p>给你一个数组 <code>events</code>，其中 <code>events[i] = [startDayi, endDayi]</code> ，表示会议 <code>i</code> 开始于 <code>startDayi</code> ，结束于 <code>endDayi</code> 。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArraySortUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] events=&#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">4</span>&#125;,&#123;<span class="number">2</span>,<span class="number">6</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>&#125;,&#123;<span class="number">3</span>,<span class="number">7</span>&#125;,&#123;<span class="number">5</span>,<span class="number">6</span>&#125;,&#123;<span class="number">2</span>,<span class="number">3</span>&#125;&#125;;</span><br><span class="line">        </span><br><span class="line">        Arrays.sort(events, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;<span class="type">int</span>[]&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(<span class="type">int</span>[] o1, <span class="type">int</span>[] o2)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> o1[<span class="number">0</span>] - o2[<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);<span class="comment">//按每个会议的开始时间（startDay）升序排序</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;events.length;i++)&#123;</span><br><span class="line">            System.out.println(events[i][<span class="number">0</span>]+<span class="string">&quot; &quot;</span>+events[i][<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;---------&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        Arrays.sort(events, (a,b) -&gt; b[<span class="number">0</span>]-a[<span class="number">0</span>]);<span class="comment">//按每个会议的开始时间（startDay）降序排序，Lambda表达式简写版本</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;events.length;i++)&#123;</span><br><span class="line">            System.out.println(events[i][<span class="number">0</span>]+<span class="string">&quot; &quot;</span>+events[i][<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">1 4</span><br><span class="line">2 6</span><br><span class="line">2 3</span><br><span class="line">3 7</span><br><span class="line">4 5</span><br><span class="line">5 6</span><br><span class="line">---------</span><br><span class="line">5 6</span><br><span class="line">4 5</span><br><span class="line">3 7</span><br><span class="line">2 6</span><br><span class="line">2 3</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">1 4</span><br></pre></td></tr></table></figure>

<h3 id="方法二：实现Comparable"><a href="#方法二：实现Comparable" class="headerlink" title="方法二：实现Comparable"></a>方法二：实现Comparable</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayComparableUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Student[] a= &#123;</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">85</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">92</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;Charlie&quot;</span>, <span class="number">78</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">        Arrays.sort(a);</span><br><span class="line">        <span class="keyword">for</span> (Student s : a) &#123;</span><br><span class="line">            System.out.println(s.name+<span class="string">&quot; &quot;</span>+s.score);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt; &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">        <span class="built_in">this</span>.score=score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Student o)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> o.score-<span class="built_in">this</span>.score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Bob 92</span><br><span class="line">Alice 85</span><br><span class="line">Charlie 78</span><br></pre></td></tr></table></figure>



<h2 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Queue</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Collection</span>&lt;E&gt;</span><br></pre></td></tr></table></figure>

<p>Queue是Java集合之一。</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>功能</th>
<th>异常行为</th>
</tr>
</thead>
<tbody><tr>
<td><code>add(e)</code></td>
<td>添加元素</td>
<td>添加失败时抛异常</td>
</tr>
<tr>
<td><code>offer(e)</code></td>
<td>添加元素</td>
<td>添加失败返回 <code>false</code></td>
</tr>
<tr>
<td><code>remove()</code></td>
<td>删除并返回头部元素</td>
<td>空时抛异常</td>
</tr>
<tr>
<td><code>poll()</code></td>
<td>删除并返回头部元素</td>
<td>空时返回 <code>null</code></td>
</tr>
<tr>
<td><code>element()</code></td>
<td>返回头部元素但不删除</td>
<td>空时抛异常</td>
</tr>
<tr>
<td><code>peek()</code></td>
<td>返回头部元素但不删除</td>
<td>空时返回 <code>null</code></td>
</tr>
</tbody></table>
<h3 id="队列：LinkedList"><a href="#队列：LinkedList" class="headerlink" title="队列：LinkedList"></a>队列：LinkedList</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QueueUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Queue&lt;Integer&gt; q=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        q.offer(<span class="number">5</span>);</span><br><span class="line">        q.offer(<span class="number">2</span>);</span><br><span class="line">        q.offer(<span class="number">4</span>);</span><br><span class="line">        System.out.println(q.peek());<span class="comment">//5</span></span><br><span class="line">        System.out.println(q.poll());<span class="comment">//5</span></span><br><span class="line">        System.out.println(q.size());<span class="comment">//2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先进先出。一般用offer添加，poll取头部并删除，peek取头部不删除。</p>
<h3 id="优先队列（小顶堆）：PriorityQueue"><a href="#优先队列（小顶堆）：PriorityQueue" class="headerlink" title="优先队列（小顶堆）：PriorityQueue"></a>优先队列（小顶堆）：PriorityQueue</h3><p>堆顶是最小值（默认）。</p>
<p>可以用自定义比较器实现最大值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PQueueUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        PriorityQueue&lt;Integer&gt; q=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();</span><br><span class="line">        q.offer(<span class="number">8</span>);</span><br><span class="line">        q.offer(<span class="number">5</span>);</span><br><span class="line">        q.offer(<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">while</span> (!q.isEmpty())&#123;</span><br><span class="line">            System.out.println(q.poll());<span class="comment">//2 5 8</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        PriorityQueue&lt;Integer&gt; qmax=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a,b)-&gt;b-a);</span><br><span class="line">        qmax.offer(<span class="number">1</span>);</span><br><span class="line">        qmax.offer(<span class="number">2</span>);</span><br><span class="line">        qmax.offer(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">while</span> (!qmax.isEmpty())&#123;</span><br><span class="line">            System.out.println(qmax.poll());<span class="comment">//3 2 1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="TreeSet-和-TreeMap"><a href="#TreeSet-和-TreeMap" class="headerlink" title="TreeSet 和 TreeMap"></a>TreeSet 和 TreeMap</h2><p>因为红黑树的自平衡特性，<code>TreeSet</code> 保证了 <code>add()</code>、<code>remove()</code> 和 <code>contains()</code> 操作的时间复杂度为 <strong>O(log n)<strong>，相比 <code>HashSet</code> 的常数时间复杂度，<code>TreeSet</code> 在插入和删除时更慢，但它提供了</strong>元素的有序性</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeSetUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Set&lt;Integer&gt; s = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">        s.add(<span class="number">5</span>);</span><br><span class="line">        s.add(<span class="number">4</span>);</span><br><span class="line">        s.add(<span class="number">3</span>);</span><br><span class="line">        Iterator&lt;Integer&gt; it=s.iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">            System.out.println(it.next());</span><br><span class="line">        &#125; <span class="comment">//3 4 5 输出时候是有序输出</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>TreeSet</code> 提供了范围查询的方法，可以获取指定范围内的元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">TreeSet&lt;Integer&gt; set = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">set.add(<span class="number">1</span>);</span><br><span class="line">set.add(<span class="number">3</span>);</span><br><span class="line">set.add(<span class="number">2</span>);</span><br><span class="line">set.add(<span class="number">5</span>);</span><br><span class="line">set.add(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取小于 4 的所有元素</span></span><br><span class="line">System.out.println(set.headSet(<span class="number">4</span>));  <span class="comment">// 输出: [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取大于等于 3 的所有元素</span></span><br><span class="line">System.out.println(set.tailSet(<span class="number">3</span>));  <span class="comment">// 输出: [3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取大于等于 2 且小于 5 的所有元素</span></span><br><span class="line">System.out.println(set.subSet(<span class="number">2</span>, <span class="number">5</span>));  <span class="comment">// 输出: [2, 3, 4]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意 TreeSet 也不重复元素。</p>
<p>TreeMap 同样的，它保证按照 <strong>键的自然顺序</strong>（或者通过构造时提供的 <code>Comparator</code>）对元素进行排序。插入、删除、查找等操作的时间复杂度为 **O(log n)**，这比 <code>HashMap</code> 的常数时间复杂度要慢。</p>
<h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleInstanceUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Person6 person6=Person6.getP();</span><br><span class="line">        System.out.println(person6.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person6</span>&#123;</span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Person6</span><span class="params">()</span> &#123;</span><br><span class="line">        name=<span class="string">&quot;zhang&quot;</span>;</span><br><span class="line">    &#125;<span class="comment">//private constructor</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Person6</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person6</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Person6 <span class="title function_">getP</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>private</code>表示该变量只能在当前类（即 <code>Person6</code>）内部访问，外部类无法直接访问。</p>
<p><code>static</code>表示该变量属于类本身，而不是类的某个实例。</p>
<p><code>final</code>该变量在初始化之后不能再被重新赋值。</p>
<h2 id="super"><a href="#super" class="headerlink" title="super"></a>super</h2><p><code>super</code> 关键字代表 <strong>“父类”</strong>，用于访问<strong>父类的变量、方法、构造器</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">super</span>();           <span class="comment">// 调用父类的无参构造器</span></span><br><span class="line"><span class="built_in">super</span>(参数...);     <span class="comment">// 调用父类的有参构造器</span></span><br><span class="line"><span class="built_in">super</span>.方法名();</span><br><span class="line"><span class="built_in">super</span>.变量名</span><br></pre></td></tr></table></figure>



<h2 id="类的多态"><a href="#类的多态" class="headerlink" title="类的多态"></a>类的多态</h2><p>多态有两种：</p>
<p><strong>编译时多态（静态多态）</strong>：方法重载（Overloading），编译时由<strong>参数列表</strong>决定调用哪个方法，方法名相同，参数<strong>类型或个数</strong>不同。（注意，仅有返回值不同不足以区分两个方法的重载）</p>
<p><strong>运行时多态（动态多态）</strong>：方法重写（Overriding）+ 父类引用指向子类对象，运行时 JVM 根据对象的<strong>实际类型而不是引用变量的声明类型</strong>来决定调用哪个方法。</p>
<p><img src="image-20250727084759712.png"></p>
<table>
<thead>
<tr>
<th align="left">特性</th>
<th align="left">重载（Overloading）</th>
<th align="left">重写（Overriding）</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>发生位置</strong></td>
<td align="left">同一个类中</td>
<td align="left">父类与子类之间（存在继承关系）</td>
</tr>
<tr>
<td align="left"><strong>方法名</strong></td>
<td align="left">必须相同</td>
<td align="left">必须相同</td>
</tr>
<tr>
<td align="left"><strong>参数列表</strong></td>
<td align="left">必须不同（数量、类型、顺序至少一个不同）</td>
<td align="left">必须完全相同</td>
</tr>
<tr>
<td align="left"><strong>返回值</strong></td>
<td align="left">可相同可不同</td>
<td align="left">必须相同或父类方法返回值的子类型（协变）</td>
</tr>
<tr>
<td align="left"><strong>访问修饰符</strong></td>
<td align="left">可相同可不同</td>
<td align="left">子类方法的访问权限不能比父类方法更严格</td>
</tr>
<tr>
<td align="left"><strong><code>static</code> 方法</strong></td>
<td align="left">可以重载（定义多个同名但参数不同的静态方法）</td>
<td align="left">不能重写（只能是隐藏）</td>
</tr>
<tr>
<td align="left"><strong><code>final</code> 方法</strong></td>
<td align="left">可以重载</td>
<td align="left">不能重写</td>
</tr>
<tr>
<td align="left"><strong><code>private</code> 方法</strong></td>
<td align="left">可以重载</td>
<td align="left">不能重写（因为不可见）</td>
</tr>
<tr>
<td align="left"><strong>目的</strong></td>
<td align="left">为类似功能提供统一的方法名（编译时多态）</td>
<td align="left">为继承的方法提供特定实现，实现运行时多态</td>
</tr>
<tr>
<td align="left"><strong>绑定方式</strong></td>
<td align="left">编译时绑定（静态绑定）</td>
<td align="left">运行时绑定（动态绑定）</td>
</tr>
<tr>
<td align="left"><strong>注解</strong></td>
<td align="left">无特定注解</td>
<td align="left"><code>@Override</code>（推荐使用，有助于编译检查）</td>
</tr>
</tbody></table>
<p>编译时多态比较简单，就是参数列表不一样的同名方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Printer</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;打印字符串: &quot;</span> + msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;打印整数: &quot;</span> + num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面主要讲运行时多态：</p>
<p><strong>向上转型</strong>：父类对象&#x3D;子类对象实例化。（<code>Person7 p=new Student7();</code>）向上转型是指将一个子类对象赋值给一个父类引用变量。它是一种隐式的（自动的）、安全的类型转换，<strong>当一个子类对象被转换为父类类型</strong>时，我们称之为向上转型。这种转换总是合法的，因为子类天然包含了父类的所有特性（方法和属性）。</p>
<p><strong>向下转型</strong>：父类对象强转为子类对象。（有时候转不了）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassHomoUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Person7 p=<span class="keyword">new</span> <span class="title class_">Student7</span>();</span><br><span class="line">        p.fun1();<span class="comment">//StudentFun1</span></span><br><span class="line">        p.fun2();<span class="comment">//PersonFun2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person7</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fun1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;PersonFun1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fun2</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;PersonFun2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student7</span> <span class="keyword">extends</span> <span class="title class_">Person7</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fun1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;StudentFun1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fun3</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;StudentFun3&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>观察上面的代码和运行结果（注释）：父类引用指向子类实例化对象的时候，调用子类的方法。</p>
<p><strong>编译看左边，运行看右边</strong>：编译时指访问成员变量的时候只能看父类的，运行时指访问方法应当看子类的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InstanceUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Q q=<span class="keyword">new</span> <span class="title class_">Q</span>();</span><br><span class="line">        S s=<span class="keyword">new</span> <span class="title class_">S</span>();</span><br><span class="line">        System.out.println(q <span class="keyword">instanceof</span> Q);<span class="comment">//true</span></span><br><span class="line">        System.out.println(q <span class="keyword">instanceof</span> S);<span class="comment">//false</span></span><br><span class="line">        System.out.println(s <span class="keyword">instanceof</span> Q);<span class="comment">//true</span></span><br><span class="line">        <span class="comment">//System.out.println(q instanceof C); java: 不兼容的类型: org.rzg.Q无法转换为org.rzg.C</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Q</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">S</span> <span class="keyword">extends</span> <span class="title class_">Q</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>一个向上转型的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UpShift</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Shape a=<span class="keyword">new</span> <span class="title class_">Shape</span>();</span><br><span class="line">        Shape b=<span class="keyword">new</span> <span class="title class_">Circle</span>();</span><br><span class="line">        Shape c=<span class="keyword">new</span> <span class="title class_">Square</span>();</span><br><span class="line">        Shape.draw(a);<span class="comment">//Draw others</span></span><br><span class="line">        Shape.draw(b);<span class="comment">//Draw circle</span></span><br><span class="line">        Shape.draw(c);<span class="comment">//Draw square</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(Shape s)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s <span class="keyword">instanceof</span> Square)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Draw square&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s <span class="keyword">instanceof</span> Circle) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Draw circle&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Draw others&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_">Shape</span>&#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span>&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>一个向下转型的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DownShift</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Bird</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Pigeon</span>();</span><br><span class="line">        <span class="type">Pigeon</span> <span class="variable">p</span> <span class="operator">=</span> (Pigeon) b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pigeon</span> <span class="keyword">extends</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另一个向上转型的例子，工厂模式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Vehicle is starting&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">extends</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Car is starting&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span> <span class="keyword">extends</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Bike is starting&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VehicleFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Vehicle <span class="title function_">createVehicle</span><span class="params">(String type)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (type.equals(<span class="string">&quot;car&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Car</span>();  <span class="comment">// 向上转型</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">&quot;bike&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bike</span>();  <span class="comment">// 向上转型</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FactoryExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">car</span> <span class="operator">=</span> VehicleFactory.createVehicle(<span class="string">&quot;car&quot;</span>);  <span class="comment">// 向上转型</span></span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">bike</span> <span class="operator">=</span> VehicleFactory.createVehicle(<span class="string">&quot;bike&quot;</span>);  <span class="comment">// 向上转型</span></span><br><span class="line"></span><br><span class="line">        car.start();  <span class="comment">// 输出 Car is starting</span></span><br><span class="line">        bike.start(); <span class="comment">// 输出 Bike is starting</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p><strong>常量</strong>：接口中所有的成员变量默认为 <code>public static final</code>，即常量，且必须初始化。</p>
<p><strong>方法</strong>：接口中的方法默认是 <code>public abstract</code> 的，意味着它们没有实现，必须由实现该接口的类来实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.class_example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PaymentMethod</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">double</span> amount)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CreditCardPayment</span> <span class="keyword">implements</span> <span class="title class_">PaymentMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;通过信用卡支付：&quot;</span> + amount + <span class="string">&quot; 元&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PayPalPayment</span> <span class="keyword">implements</span> <span class="title class_">PaymentMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;通过 PayPal 支付：&quot;</span> + amount + <span class="string">&quot; 元&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.class_example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PayTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        PaymentMethod c=<span class="keyword">new</span> <span class="title class_">CreditCardPayment</span>();</span><br><span class="line">        PaymentMethod p=<span class="keyword">new</span> <span class="title class_">PayPalPayment</span>();</span><br><span class="line">        c.pay(<span class="number">100.0</span>);<span class="comment">//通过信用卡支付：100.0 元</span></span><br><span class="line">        p.pay(<span class="number">200.1</span>);<span class="comment">//通过 PayPal 支付：200.1 元</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="抽象类和接口的区别"><a href="#抽象类和接口的区别" class="headerlink" title="抽象类和接口的区别"></a>抽象类和接口的区别</h3><p>1.语法层面上的区别</p>
<p>　　1）抽象类可以提供成员方法的实现细节，而接口中只能存在public abstract 方法；</p>
<p>　　2）抽象类中的成员变量可以是各种类型的，而接口中的成员变量只能是public static final类型的；</p>
<p>　　3）接口中不能含有静态代码块以及静态方法，而抽象类可以有静态代码块和静态方法；</p>
<p>　　4）一个类只能继承一个抽象类，而一个类却可以实现多个接口。</p>
<p>2.设计层面上的区别</p>
<p>　　1）<strong>抽象类是对一种事物的抽象，即对类抽象，而接口是对行为的抽象</strong>。抽象类是对整个类整体进行抽象，包括属性、行为，但是接口却是对类局部（行为）进行抽象。举个简单的例子，飞机和鸟是不同类的事物，但是它们都有一个共性，就是都会飞。那么在设计的时候，可以将飞机设计为一个类Airplane，将鸟设计为一个类Bird，但是不能将 飞行 这个特性也设计为类，因此它只是一个行为特性，并不是对一类事物的抽象描述。此时可以将 飞行 设计为一个接口Fly，包含方法fly( )，然后Airplane和Bird分别根据自己的需要实现Fly这个接口。然后至于有不同种类的飞机，比如战斗机、民用飞机等直接继承Airplane即可，对于鸟也是类似的，不同种类的鸟直接继承Bird类即可。从这里可以看出，继承是一个 “是不是”的关系，而 接口 实现则是 “有没有”的关系。如果一个类继承了某个抽象类，则子类必定是抽象类的种类，而接口实现则是有没有、具备不具备的关系，比如鸟是否能飞（或者是否具备飞行这个特点），能飞行则可以实现这个接口，不能飞行就不实现这个接口。</p>
<p>　　2）设计层面不同，<strong>抽象类作为很多子类的父类，它是一种模板式设计。而接口是一种行为规范，它是一种辐射式设计。</strong>什么是模板式设计？最简单例子，大家都用过ppt里面的模板，如果用模板A设计了ppt B和ppt C，ppt B和ppt C公共的部分就是模板A了，如果它们的公共部分需要改动，则只需要改动模板A就可以了，不需要重新对ppt B和ppt C进行改动。而辐射式设计，比如某个电梯都装了某种报警器，一旦要更新报警器，就必须全部更新。也就是说对于抽象类，如果需要添加新的方法，可以直接在抽象类中添加具体的实现，子类可以不进行变更；而对于接口则不行，如果接口进行了变更，则所有实现这个接口的类都必须进行相应的改动。</p>
<h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjectExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Boy b1=<span class="keyword">new</span> <span class="title class_">Boy</span>();</span><br><span class="line">        System.out.println(b1.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Boy</span> <span class="keyword">extends</span> <span class="title class_">Object</span> &#123;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Boy&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Object是所有类的父类。</p>
<p>若一个类无extends关键字，则默认继承Object.</p>
<p>Object有toString等等方法，我们可以覆写。</p>
<h2 id="不定长参数方法"><a href="#不定长参数方法" class="headerlink" title="不定长参数方法"></a>不定长参数方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OverUse2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> ...a)</span>&#123;</span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> x:a)&#123;</span><br><span class="line">            sum+=x;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>));<span class="comment">//15</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="final"><a href="#final" class="headerlink" title="final"></a>final</h2><p><strong><code>final</code> 变量</strong>：用于定义常量，常量的值在赋值之后不能修改。（但如果它是一个对象引用，引用的对象本身仍然可以被修改，即对象的内容是可变的）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinalTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Boy2 a=<span class="keyword">new</span> <span class="title class_">Boy2</span>();</span><br><span class="line">        <span class="keyword">final</span> Boy2 b=<span class="keyword">new</span> <span class="title class_">Boy2</span>();</span><br><span class="line">        </span><br><span class="line">        System.out.println(b.name);<span class="comment">// null</span></span><br><span class="line">        b.name=<span class="string">&quot;abc&quot;</span>;</span><br><span class="line">        System.out.println(b.name);<span class="comment">// abc</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//b=a;无法将值赋给 final 变量 &#x27;b&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Boy2</span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><code>final</code> 方法</strong>：表示该方法不能被重写（子类不能修改父类的实现）。</p>
<p><strong><code>final</code> 类</strong>：表示该类不能被继承，不能有子类。</p>
<p><strong><code>final</code> 参数</strong>：用于表示方法参数在方法内不可修改。（参数 x 被声明为 final，意味着方法体内无法修改它）</p>
<h2 id="包及其访问权限"><a href="#包及其访问权限" class="headerlink" title="包及其访问权限"></a>包及其访问权限</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.String;</span><br></pre></td></tr></table></figure>

<p>这里，java.lang是包名，String是类名。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> &lt;类名&gt;.&lt;静态成员&gt;;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.PI; <span class="comment">// 导入 PI 常量</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.sqrt; <span class="comment">// 导入 sqrt 方法</span></span><br></pre></td></tr></table></figure>

<p>这样可以导入静态的常亮与方法。</p>
<p>下面是一个导入其他包内类的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.importuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.rzg.test8.Number;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Number n=<span class="keyword">new</span> <span class="title class_">Number</span>(<span class="number">20</span>);</span><br><span class="line">        System.out.println(n.getNum());</span><br><span class="line">        org.rzg.test8.Number b=<span class="keyword">new</span> <span class="title class_">org</span>.rzg.test8.Number(<span class="number">50</span>);</span><br><span class="line">        System.out.println(b.getNum());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果有import，直接用<code>Number n=new Number(20);</code></p>
<p>如果没有import，可以把整个路径写出来，像这样也可以：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.importuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//Number n=new Number(20);</span></span><br><span class="line">        <span class="comment">//System.out.println(n.getNum());</span></span><br><span class="line">        org.rzg.test8.Number b=<span class="keyword">new</span> <span class="title class_">org</span>.rzg.test8.Number(<span class="number">50</span>);</span><br><span class="line">        System.out.println(b.getNum());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>访问控制权限：</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>当前类</th>
<th>同一包</th>
<th>子类（不同包）</th>
<th>非子类（不同包）</th>
</tr>
</thead>
<tbody><tr>
<td><code>public</code></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><code>protected</code></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>缺省</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td><code>private</code></td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody></table>
<p><strong>类</strong>：只能是 <code>public</code> 或 默认访问（类不能是 <code>private</code> 或 <code>protected</code>）。</p>
<p>成员变量与方法：四个都可以设置。</p>
<h2 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.innerclassexample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(name+<span class="string">&quot; start&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Engine</span> &#123;</span><br><span class="line">        String name;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Engine</span><span class="params">(String name)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.name=name;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(name+<span class="string">&quot; start&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        Car c=<span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        Car.Engine e=c.<span class="keyword">new</span> <span class="title class_">Engine</span>(<span class="string">&quot;cde&quot;</span>);</span><br><span class="line">        c.start();</span><br><span class="line">        e.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>内部类不仅可以在外部类使用，还可以在其他类使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">外部类 outer = <span class="keyword">new</span> 外部类();</span><br><span class="line">外部类.内部类 inner = outer.new 内部类();</span><br></pre></td></tr></table></figure>

<p>关于同名的变量怎么使用的问题：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.innerclassexample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassB</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">inner</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> x=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fun</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="type">int</span> x=<span class="number">10</span>;</span><br><span class="line">            x++;<span class="comment">//局部变量x</span></span><br><span class="line">            <span class="built_in">this</span>.x++;<span class="comment">//内部类x</span></span><br><span class="line">            ClassB.<span class="built_in">this</span>.x++;<span class="comment">//外部类x</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>非静态内部类</strong>的实例<strong>依赖于</strong>外部类的实例而存在。</li>
<li><strong>静态内部类</strong>的实例<strong>不依赖于</strong>外部类的实例，它可以独立存在。</li>
</ul>
<table>
<thead>
<tr>
<th align="left">特性</th>
<th align="left">非静态内部类 (Inner Class)</th>
<th align="left">静态内部类 (Static Nested Class)</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>与外部类实例的关系</strong></td>
<td align="left"><strong>强依赖</strong>。每个实例都隐式持有外部类实例的引用。</td>
<td align="left"><strong>独立</strong>。不持有外部类实例的引用，只是在命名空间上属于外部类。</td>
</tr>
<tr>
<td align="left"><strong>实例化方式</strong></td>
<td align="left"><code>OuterClass outer = new OuterClass();</code> <br> <code>OuterClass.InnerClass inner = outer.new InnerClass();</code></td>
<td align="left"><code>OuterClass.StaticNestedClass nested = new OuterClass.StaticNestedClass();</code></td>
</tr>
<tr>
<td align="left"><strong>访问外部类成员</strong></td>
<td align="left">可以访问外部类的<strong>所有成员</strong>（包括 <code>private</code> 的静态和非静态成员）。</td>
<td align="left"><strong>只能访问</strong>外部类的<strong>静态成员</strong>（包括 <code>private</code> 的静态成员）。</td>
</tr>
<tr>
<td align="left"><strong>自身成员限制</strong></td>
<td align="left"><strong>不能定义静态成员</strong>（<code>static</code> 字段和 <code>static</code> 方法），除非是 <code>static final</code> 的编译期常量。</td>
<td align="left">可以定义<strong>所有类型</strong>的成员（静态和非静态），和普通类一样。</td>
</tr>
<tr>
<td align="left"><strong>内存影响</strong></td>
<td align="left">可能导致<strong>内存泄漏</strong>。只要内部类实例存在，其关联的外部类实例就不会被垃圾回收。</td>
<td align="left"><strong>不会</strong>。因为它不持有外部类实例的引用，生命周期是独立的。</td>
</tr>
<tr>
<td align="left"><strong>主要用途</strong></td>
<td align="left">当内部类需要与外部类的特定实例紧密协作时使用。</td>
<td align="left">仅作为外部类的逻辑分组，或实现设计模式（如Builder模式）。</td>
</tr>
</tbody></table>
<p><strong>非静态内部类 (Inner Class)</strong></p>
<p>它与外部类的一个具体实例绑定。你不能在没有外部类实例的情况下创建非静态内部类的实例。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OuterClass</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">outerField</span> <span class="operator">=</span> <span class="string">&quot;Outer Field&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 非静态内部类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InnerClass</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="comment">// 可以直接访问外部类的成员</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Accessing from InnerClass: &quot;</span> + outerField);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如何实例化</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 必须先创建外部类的实例</span></span><br><span class="line">        <span class="type">OuterClass</span> <span class="variable">outerObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OuterClass</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 使用外部类实例来创建内部类实例</span></span><br><span class="line">        OuterClass.<span class="type">InnerClass</span> <span class="variable">innerObject</span> <span class="operator">=</span> outerObject.<span class="keyword">new</span> <span class="title class_">InnerClass</span>();</span><br><span class="line">      </span><br><span class="line">        innerObject.display(); <span class="comment">// 输出: Accessing from InnerClass: Outer Field</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>静态内部类 (Static Nested Class)</strong></p>
<p>它在行为上更像一个普通的顶级类，只是被“包装”在了另一个类的命名空间里。它的创建不依赖于外部类的任何实例。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OuterClass</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">outerField</span> <span class="operator">=</span> <span class="string">&quot;Outer Field&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">staticOuterField</span> <span class="operator">=</span> <span class="string">&quot;Static Outer Field&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态内部类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StaticNestedClass</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="comment">// 错误！不能访问外部类的非静态成员</span></span><br><span class="line">            <span class="comment">// System.out.println(outerField); </span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 可以访问外部类的静态成员</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Accessing from StaticNestedClass: &quot;</span> + staticOuterField);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如何实例化</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 直接通过外部类名创建，无需外部类实例</span></span><br><span class="line">        OuterClass.<span class="type">StaticNestedClass</span> <span class="variable">nestedObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OuterClass</span>.StaticNestedClass();</span><br><span class="line"></span><br><span class="line">        nestedObject.display(); <span class="comment">// 输出: Accessing from StaticNestedClass: Static Outer Field</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="匿名内部类"><a href="#匿名内部类" class="headerlink" title="匿名内部类"></a>匿名内部类</h2><p>只在<strong>创建对象</strong>的时候会用到。用于<strong>快速实现一个接口</strong>，只用一次的场景。</p>
<p>语法为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> 父类或接口类型() &#123;</span><br><span class="line">    <span class="comment">//重写方法</span></span><br><span class="line">&#125;;<span class="comment">//不要忘了分号</span></span><br></pre></td></tr></table></figure>

<p>举一个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.anyclassuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.anyclassuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Dog d=<span class="keyword">new</span> <span class="title class_">Dog</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;move&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;call&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        d.call();</span><br><span class="line">        d.move();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里我们实例化了一个接口。接口正常情况下是不能被实例化的，其实这里实例化的是该接口的匿名实现类。</p>
<p>对象 d 在这里并不属于任何一个具体的实现类，只能被解读为一个无名实现类的对象。</p>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>异常分为两大类，Checked Exceptions（检查型异常），Unchecked Exceptions（非检查型异常）。</p>
<p>检查型：程序必须处理这些异常（见下面的代码）。编译时强制检查。<code>IOException</code>、<code>SQLException</code>、<code>ClassNotFoundException</code> 等。</p>
<p>非检查型：不需要显式捕获。运行时异常。<code>NullPointerException</code>、<code>ArrayIndexOutOfBoundsException</code>、<code>ArithmeticException</code> 等。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        FileReader f=<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;abc.txt&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译时报错：未处理 异常: java.io.FileNotFoundException</span></span><br></pre></td></tr></table></figure>

<p>Java 异常处理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 可能会抛出异常的代码</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (ExceptionType1 e1) &#123;</span><br><span class="line">    <span class="comment">// 异常处理代码</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (ExceptionType2 e2) &#123;</span><br><span class="line">    <span class="comment">// 处理另一个异常</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">// 无论是否发生异常都会执行的代码（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="自定义异常类"><a href="#自定义异常类" class="headerlink" title="自定义异常类"></a>自定义异常类</h3><p>首先可以自己定义一个异常类，继承 Exception 即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.exceptiontest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyException</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们可以写一个可能触发异常的方法，这里有三种方案：</p>
<p>方案一：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.exceptiontest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        System.out.println(fun(<span class="number">101</span>,<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fun</span><span class="params">(<span class="type">int</span> n1,<span class="type">int</span> n2)</span>&#123;</span><br><span class="line">        <span class="type">int</span> result=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            result = n1+n2;</span><br><span class="line">            <span class="keyword">if</span>(n1&lt;<span class="number">0</span>||n2&lt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;不能负数&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(n1&gt;<span class="number">100</span>||n2&gt;<span class="number">100</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;数值过大&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (MyException e)&#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">org.rzg.exceptiontest.MyException: 数值过大</span><br><span class="line">102</span><br><span class="line"></span><br><span class="line">进程已结束,退出代码0</span><br></pre></td></tr></table></figure>

<p>方案二：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.exceptiontest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            System.out.println(fun(<span class="number">101</span>,<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (MyException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fun</span><span class="params">(<span class="type">int</span> n1,<span class="type">int</span> n2)</span> <span class="keyword">throws</span> MyException&#123;</span><br><span class="line">        <span class="keyword">if</span>(n1&lt;<span class="number">0</span>||n2&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;不能负数&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n1&gt;<span class="number">100</span>||n2&gt;<span class="number">100</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;数值过大&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n1+n2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">org.rzg.exceptiontest.MyException: 数值过大</span><br><span class="line"></span><br><span class="line">进程已结束,退出代码0</span><br></pre></td></tr></table></figure>

<p>方案三：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.exceptiontest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//try&#123;</span></span><br><span class="line">            System.out.println(fun(<span class="number">101</span>,<span class="number">1</span>));</span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">        <span class="comment">//catch (MyException e) &#123;</span></span><br><span class="line">         <span class="comment">//   System.out.println(e);</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fun</span><span class="params">(<span class="type">int</span> n1,<span class="type">int</span> n2)</span> <span class="keyword">throws</span> MyException&#123;</span><br><span class="line">        <span class="keyword">if</span>(n1&lt;<span class="number">0</span>||n2&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;不能负数&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n1&gt;<span class="number">100</span>||n2&gt;<span class="number">100</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;数值过大&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n1+n2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; org.rzg.exceptiontest.MyException: 数值过大</span><br><span class="line">	at org.rzg.exceptiontest.Test.fun(Test.java:18)</span><br><span class="line">	at org.rzg.exceptiontest.Test.main(Test.java:6)</span><br><span class="line"></span><br><span class="line">进程已结束,退出代码1</span><br></pre></td></tr></table></figure>

<p>三种方案中，方案二是最优的。</p>
<p>在程序中使用自定义异常类，大体可分为以下几个步骤：</p>
<ol>
<li>创建自定义异常类。</li>
<li>在方法中通过throw关键字抛出异常对象。</li>
<li>如果在当前抛出异常的方法中处理异常，可以使用try-catch语句块捕获并处理，否则<strong>在方法的声明处通过throws关键字指明要抛出给方法调用者的异常</strong>，继续进行下一步操作。</li>
<li><strong>在出现异常的方法的调用者中捕获并处理异常</strong>。</li>
</ol>
<h3 id="throw-和-throws-有何区别？"><a href="#throw-和-throws-有何区别？" class="headerlink" title="throw 和 throws 有何区别？"></a><code>throw</code> 和 <code>throws</code> 有何区别？</h3><p><code>throws</code> 关键字通常被应用在<strong>声明方法</strong>时，用来指定方法可能抛出的异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span><br></pre></td></tr></table></figure>

<p><code>throw</code> 关键字通常用于<strong>方法体</strong>中，并且抛出一个异常对象。程序在执行到throw语句时立即终止，它后面的语句都不执行。常用于自定义异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(n1&lt;<span class="number">0</span>||n2&lt;<span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MyException</span>(<span class="string">&quot;不能负数&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果是Error类、RuntimeException类或它们的子类（非检查型），可以不使用throws关键字来声明要抛出的异常，编译仍能顺利通过，运行时会被系统自动抛出。</p>
<h3 id="继承原则"><a href="#继承原则" class="headerlink" title="继承原则"></a>继承原则</h3><p>子类方法只能抛出父类方法抛出的异常的子集，或者父类异常的子类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 父类方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    <span class="comment">// 合法：子类方法抛出 IOException 的子类</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line">        <span class="comment">// 子类方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 不合法：子类方法抛出父类没有声明的异常</span></span><br><span class="line">    <span class="comment">// @Override</span></span><br><span class="line">    <span class="comment">// public void doSomething() throws SQLException &#123; // 编译错误</span></span><br><span class="line">    <span class="comment">//     // 子类方法</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="文件IO"><a href="#文件IO" class="headerlink" title="文件IO"></a>文件IO</h2><h3 id="字节-字符-IO"><a href="#字节-字符-IO" class="headerlink" title="字节&#x2F;字符 IO"></a>字节&#x2F;字符 IO</h3><p>Java语言定义了许多类专门负责各种方式的输入／输出，这些类都被放在 <code>java.io</code> 包中。</p>
<p>其中，所有输入流类都是抽象类InputStream（字节输入流）或抽象类Reader（字符输入流）的子类；</p>
<p>而所有输出流都是抽象类OutputStream（字节输出流）或抽象类Writer（字符输出流）的子类。</p>
<p>注意，因为 <code>IOException</code>，需要显式捕获。</p>
<h3 id="File"><a href="#File" class="headerlink" title="File"></a>File</h3><p>File类是java.io包中唯一代表磁盘文件本身的类。可以通过调用File类中的方法，实现创建、删除、重命名文件等操作。</p>
<p>用File类创建一个文件对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">File fd=<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\&quot;</span>);</span><br></pre></td></tr></table></figure>



<h3 id="文件输入输出流"><a href="#文件输入输出流" class="headerlink" title="文件输入输出流"></a>文件输入输出流</h3><p>FileInputStream类与FileOutputStream类，字节流操控磁盘文件。</p>
<p>FileReader类和FileWriter类对应了FileInputStream类和FileOutputStream类。字符流。</p>
<p>BufferedInputStream类可以对所有InputStream类进行带缓存区的包装以达到性能的优化。使用BufferedOutputStream类输出信息和仅用OutputStream类输出信息完全一样。</p>
<p>BufferedReader类与BufferedWriter类分别继承Reader类与Writer类。这两个类同样具有内部缓存机制，并能够以行为单位进行输入／输出。</p>
<p>数据输入／输出流（DataInputStream类与DataOutputStream类）允许应用程序以与机器无关的方式从底层输入流中读取基本Java数据类型。</p>
<p>详细的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.filetest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        File f=<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line">        System.out.println(f.getName()+<span class="string">&quot; &quot;</span>+f.getAbsolutePath()+<span class="string">&quot; &quot;</span>+f.canWrite());<span class="comment">//File操作</span></span><br><span class="line"></span><br><span class="line">        FileOutputStream fout=<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(f);<span class="comment">//字节流</span></span><br><span class="line">        String s1=<span class="string">&quot;你好，文件你好&quot;</span>;</span><br><span class="line">        <span class="type">byte</span>[] b1=s1.getBytes();</span><br><span class="line">        fout.write(b1);</span><br><span class="line">        fout.close();</span><br><span class="line"></span><br><span class="line">        FileInputStream fin=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class="line">        <span class="type">int</span> len=<span class="number">0</span>;</span><br><span class="line">        <span class="type">byte</span>[] b2=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">2048</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len=fin.read(b2))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(b2,<span class="number">0</span>,len));</span><br><span class="line">        &#125;</span><br><span class="line">        fin.close();</span><br><span class="line"></span><br><span class="line">        FileWriter fw=<span class="keyword">new</span> <span class="title class_">FileWriter</span>(f,<span class="literal">true</span>);<span class="comment">//true代表append追加</span></span><br><span class="line">        fw.write(s1);</span><br><span class="line">        fw.close();</span><br><span class="line"></span><br><span class="line">        FileReader fr=<span class="keyword">new</span> <span class="title class_">FileReader</span>(f);<span class="comment">//字符流</span></span><br><span class="line">        <span class="type">char</span>[] buffer=<span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">2048</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len=fr.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buffer,<span class="number">0</span>,len));</span><br><span class="line">        &#125;</span><br><span class="line">        fr.close();</span><br><span class="line"></span><br><span class="line">        FileWriter fw2=<span class="keyword">new</span> <span class="title class_">FileWriter</span>(f,<span class="literal">true</span>);</span><br><span class="line">        BufferedWriter bw=<span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(fw2);<span class="comment">//适用于多行读写</span></span><br><span class="line">        String[] s5=&#123;<span class="string">&quot;你好java&quot;</span>,<span class="string">&quot;你好SQL&quot;</span>,<span class="string">&quot;你好Springboot&quot;</span>&#125;;</span><br><span class="line">        bw.newLine();</span><br><span class="line">        <span class="keyword">for</span>(String x:s5)&#123;</span><br><span class="line">            bw.write(x);</span><br><span class="line">            bw.newLine();</span><br><span class="line">        &#125;</span><br><span class="line">        bw.close();</span><br><span class="line">        fw.close();</span><br><span class="line"></span><br><span class="line">        FileReader fr2=<span class="keyword">new</span> <span class="title class_">FileReader</span>(f);</span><br><span class="line">        BufferedReader br=<span class="keyword">new</span> <span class="title class_">BufferedReader</span>(fr2);</span><br><span class="line">        String s6;</span><br><span class="line">        <span class="keyword">while</span> ((s6=br.readLine())!=<span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(s6);</span><br><span class="line">        &#125;</span><br><span class="line">        br.close();</span><br><span class="line">        fr2.close();</span><br><span class="line"></span><br><span class="line">        FileOutputStream fout2=<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(f);</span><br><span class="line">        DataOutputStream dout=<span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(fout2);</span><br><span class="line">        dout.writeFloat(<span class="number">2.2345f</span>);</span><br><span class="line">        dout.writeLong(<span class="number">2282349894344372389L</span>);</span><br><span class="line">        dout.writeUTF(<span class="string">&quot;中国汉字&quot;</span>);</span><br><span class="line">        dout.close();</span><br><span class="line"></span><br><span class="line">        FileInputStream fin2=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class="line">        DataInputStream din=<span class="keyword">new</span> <span class="title class_">DataInputStream</span>(fin2);</span><br><span class="line">        System.out.println(din.readFloat());</span><br><span class="line">        System.out.println(din.readLong());</span><br><span class="line">        System.out.println(din.readUTF());</span><br><span class="line">        din.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="枚举类"><a href="#枚举类" class="headerlink" title="枚举类"></a>枚举类</h2><p>（没懂这是干啥的，等以后做项目慢慢看吧）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.enumuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">AppConstants</span> &#123;</span><br><span class="line">    MAX_USER_COUNT(<span class="number">100</span>),</span><br><span class="line">    APP_NAME(<span class="string">&quot;MyApplication&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object value;</span><br><span class="line"></span><br><span class="line">    AppConstants(Object value) &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.enumuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(AppConstants.APP_NAME.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Planet</span> &#123;</span><br><span class="line">	MERCURY(<span class="number">3.302e+23</span>, <span class="number">2.439e6</span>), VENUS(<span class="number">4.869e+24</span>, <span class="number">6.052e6</span>), </span><br><span class="line">EARTH(<span class="number">5.975e+24</span>,<span class="number">6.378e6</span>), MARS(<span class="number">6.419e+23</span>, <span class="number">3.393e6</span>), JUPITER(<span class="number">1.899e+27</span>, <span class="number">7.149e7</span>), </span><br><span class="line">SATURN(<span class="number">5.685e+26</span>, <span class="number">6.027e7</span>), URANUS(<span class="number">8.683e+25</span>, <span class="number">2.556e7</span>), NEPTUNE(<span class="number">1.024e+26</span>,<span class="number">2.477e7</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span> mass; <span class="comment">//质量</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span> radius; <span class="comment">//半径</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span> surfaceGravity; <span class="comment">//表面重力</span></span><br><span class="line"> </span><br><span class="line">	<span class="comment">//引力常数</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">double</span> <span class="variable">G</span> <span class="operator">=</span> <span class="number">6.67300E-11</span>;</span><br><span class="line"> </span><br><span class="line">	Planet(<span class="type">double</span> mass, <span class="type">double</span> radius) &#123;</span><br><span class="line">		<span class="built_in">this</span>.mass = mass;</span><br><span class="line">		<span class="built_in">this</span>.radius = radius;</span><br><span class="line">		surfaceGravity = G * mass / (radius * radius);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="type">double</span> <span class="title function_">mass</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> mass;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="type">double</span> <span class="title function_">radius</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> radius;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">public</span> <span class="type">double</span> <span class="title function_">surfaceGravity</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> surfaceGravity;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//计算一定质量的物体在该星球上的重量。</span></span><br><span class="line">	<span class="keyword">public</span> <span class="type">double</span> <span class="title function_">surfaceWeight</span><span class="params">(<span class="type">double</span> mass)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> mass * surfaceGravity; <span class="comment">// F = ma</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>建议搞明白向上向下转型之后再看这章。</p>
<p>在没有出现泛型之前，Java也提供了对Object类型的引用“任意化”操作，这种“任意化”操作就是对Object类型引用进行向下转型及向上转型操作.</p>
<p>如果没有泛型，我们通常将集合、容器或其他数据结构的元素类型设为 <code>Object</code>，然后通过强制类型转换将其转换为目标类型。</p>
<p>当我们使用 <code>Object</code> 类型时，<strong>编译器无法检查</strong>元素的具体类型，导致在<strong>运行时</strong>可能会发生类型错误：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 Object 类型存储不同类型的元素</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> (String) obj;  <span class="comment">// 正常</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">num</span> <span class="operator">=</span> (Integer) obj;  <span class="comment">// ClassCastException: class java.lang.String cannot be cast to class java.lang.Integer</span></span><br></pre></td></tr></table></figure>

<p>一个更具体的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjectUse3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Test t=<span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">        String s=<span class="string">&quot;你好&quot;</span>;</span><br><span class="line">        t.setA(s);<span class="comment">//向上转型</span></span><br><span class="line">        System.out.println(t.getA());<span class="comment">//向下转型</span></span><br><span class="line">        Integer i=Integer.parseInt(<span class="string">&quot;1234&quot;</span>);</span><br><span class="line">        t.setA(i);<span class="comment">//向上转型</span></span><br><span class="line">        System.out.println(t.getA());<span class="comment">//向下转型</span></span><br><span class="line"></span><br><span class="line">        String str=(String)t.getA();<span class="comment">//向下转型可能会出现运行时错误，但编译能过</span></span><br><span class="line">        System.out.println(str);<span class="comment">//class java.lang.Integer cannot be cast to class java.lang.String</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object a;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getA</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setA</span><span class="params">(Object a)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.a=a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>泛型的语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">类名&lt;T&gt;</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; l=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br></pre></td></tr></table></figure>

<p>这里的<code>List&lt;Integer&gt;</code>就是<code>类名&lt;T&gt;</code>。如果不指定具体类型，T则采用Object类型。</p>
<p>下面给出一个具体的泛型例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericsTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Book&lt;String&gt; a=<span class="keyword">new</span> <span class="title class_">Book</span>&lt;&gt;(<span class="string">&quot;一本书&quot;</span>);</span><br><span class="line">        Book&lt;Integer&gt; b=<span class="keyword">new</span> <span class="title class_">Book</span>&lt;&gt;(<span class="number">123</span>);</span><br><span class="line">        Book&lt;Boolean&gt; c=<span class="keyword">new</span> <span class="title class_">Book</span>&lt;&gt;(<span class="literal">true</span>);</span><br><span class="line">        Book&lt;Person12&gt; d=<span class="keyword">new</span> <span class="title class_">Book</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Person12</span>(<span class="string">&quot;zhang&quot;</span>));</span><br><span class="line">        System.out.println(a.getInfo());</span><br><span class="line">        System.out.println(b.getInfo());</span><br><span class="line">        System.out.println(c.getInfo());</span><br><span class="line">        System.out.println(d.getInfo());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>&lt;T&gt;&#123;</span><br><span class="line">    <span class="keyword">private</span> T info;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">(T info)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.info=info;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person12</span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person12</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person12&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果写成这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Book&lt;String&gt; e=<span class="keyword">new</span> <span class="title class_">Book</span>&lt;&gt;(<span class="number">123</span>);</span><br></pre></td></tr></table></figure>

<p>就会编译报错：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不兼容的类型。实际为 org.rzg.Book&lt;java.lang.Integer&gt;&#x27;，需要 &#x27;org.rzg.Book&lt;java.lang.String&gt;&#x27;</span><br></pre></td></tr></table></figure>

<p>泛型还可以限制可用类型：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LimitUse</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Test2&lt;ArrayList&gt; a=<span class="keyword">new</span> <span class="title class_">Test2</span>&lt;&gt;();</span><br><span class="line">        Test2&lt;LinkedList&gt; b=<span class="keyword">new</span> <span class="title class_">Test2</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// Test2&lt;HashMap&gt;c =new Test2&lt;&gt;();</span></span><br><span class="line">        <span class="comment">// 类型形参 &#x27;java.util.HashMap&#x27; 不在其界限内；应实现 &#x27;java.util.List&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test2</span>&lt;T <span class="keyword">extends</span> <span class="title class_">List</span>&gt;&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面这个实例中，设置泛型类型必须实现List接口。</p>
<p>使用类型通配符：</p>
<ul>
<li><? extends T>：上界通配符</li>
<li><? super T>：下界通配符</li>
</ul>
<p>推荐教程：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_51409098/article/details/126378917?ops_request_misc=%7B%22request_id%22:%2293ae3bab5c93dfab928e66c8495d1f6d%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=93ae3bab5c93dfab928e66c8495d1f6d&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-126378917-null-null.142%5Ev102%5Epc_search_result_base7&utm_term=java%E6%B3%9B%E5%9E%8B%E7%B1%BB%E5%9E%8B%E9%80%9A%E9%85%8D%E7%AC%A6&spm=1018.2226.3001.4187">Java泛型中通配符的使用详解_泛型通配符-CSDN博客</a></p>
<p>在 Java 语言中，数组是协变的，也就是说，如果 Integer 扩展了 Number，那么不仅 Integer 是 Number，而且 Integer[] 也是 Number[]，在要求 Number[] 的地方完全可以传递或者赋予 Integer[]。</p>
<p>但是泛型不能这样操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; l=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        test(l);<span class="comment">//&#x27;org.rzg.Test7&#x27; 中的 &#x27;test(java.util.List&lt;java.lang.Object&gt;)&#x27; 无法应用于 &#x27;(java.util.List&lt;java.lang.Integer&gt;)&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(List&lt;Object&gt; l)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Object x:l)&#123;</span><br><span class="line">            System.out.println(x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>苹果 IS-A 水果</li>
<li>装苹果的盘子 NOT-IS-A 装水果的盘子</li>
</ul>
<p>所以，就算容器里装的东西之间有继承关系，但容器之间是没有继承关系。</p>
<p>所以我们不可以把<code>Plate&lt;Apple&gt;</code>的引用传递给<code>Plate&lt;Fruit&gt;</code>。</p>
<p>这里我们先补充一下泛型类型擦除机制：</p>
<ul>
<li><p><strong>编译时：</strong> 编译器会检查你代码中泛型的使用是否符合类型安全。它利用了你在尖括号 <code>&lt;&gt;</code> 中提供的类型信息。</p>
</li>
<li><p><strong>运行时：</strong> 当你编译后的字节码（<code>.class</code>文件）在Java虚拟机（JVM）上运行时，<strong>所有具体的类型参数信息都会被移除（擦除）</strong>。泛型类型被替换为其<strong>原始类型（Raw Type）</strong>。如果类型参数没有指定任何边界（如 <code>&lt;T&gt;</code>），它会被擦除为 <code>Object</code>。 <code>MyClass&lt;T&gt;</code> 在运行时变成 <code>MyClass</code>（原始类型），其内部的 <code>T</code> 被当作 <code>Object</code> 处理。</p>
</li>
<li><p>泛型类并没有自己独有的 Class 类对象。比如并不存在 <code>List&lt;String&gt;.class</code> 或是 <code>List&lt;Integer&gt;.class</code>，而只有 <code>List.class</code>，因此在运行时无法获得泛型的真实类型信息。</p>
</li>
<li><p>泛型的类型参数不能用在 Java 异常处理的 catch 语句中。因为异常处理是由 JVM 在运行时刻来进行的。由于类型信息被擦除，JVM 是无法区分两个异常类型 <code>MyException&lt;String&gt;</code> 和 <code>MyException&lt;Integer&gt;</code> 的。对于 JVM 来说，它们都是 <code>MyException</code> 类型的。也就无法执行与异常对应的 catch 语句。</p>
</li>
</ul>
<p>了解了类型擦除机制之后，就会明白<strong>编译器承担了全部的类型检查工作</strong>。<strong>编译器禁止某些泛型的使用方式，正是为了确保类型的安全性。</strong></p>
<p>现在我们终于引入<strong>类型通配符</strong>，实现装苹果的盘子与装水果的盘子的赋值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test8</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;? <span class="keyword">extends</span> <span class="title class_">Fruit</span>&gt; l1=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Apple&gt;();</span><br><span class="line">        List&lt;? <span class="keyword">extends</span> <span class="title class_">Fruit</span>&gt; l2=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Fruit&gt;();</span><br><span class="line">        List&lt;? <span class="keyword">extends</span> <span class="title class_">Fruit</span>&gt; l3=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Food&gt;();</span><br><span class="line">        <span class="comment">//不兼容的类型。实际为 java.util.ArrayList&lt;org.rzg.Food&gt;&#x27;，需要 &#x27;java.util.List&lt;? extends org.rzg.Fruit&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line">        List&lt;? <span class="built_in">super</span> Fruit&gt; l4=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Orange&gt;();</span><br><span class="line">        <span class="comment">//不兼容的类型。实际为 java.util.ArrayList&lt;org.rzg.Orange&gt;&#x27;，需要 &#x27;java.util.List&lt;? super org.rzg.Fruit&gt;&#x27;</span></span><br><span class="line">        </span><br><span class="line">        List&lt;? <span class="built_in">super</span> Fruit&gt; l5=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Food&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Food</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fruit</span> <span class="keyword">extends</span> <span class="title class_">Food</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span> <span class="keyword">extends</span> <span class="title class_">Fruit</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Orange</span> <span class="keyword">extends</span> <span class="title class_">Fruit</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>上界<code>&lt;? extends T&gt;</code>不能往里存，只能往外取到T及其父类中。生产者。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Orange&gt; oranges = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">List&lt;? <span class="keyword">extends</span> <span class="title class_">Fruit</span>&gt; fruits = oranges; <span class="comment">// 合法赋值</span></span><br><span class="line">fruits.add(<span class="keyword">new</span> <span class="title class_">Apple</span>()); <span class="comment">// 如果允许，会污染 oranges 集合！</span></span><br><span class="line">Apple a3=fruits.get(<span class="number">0</span>);<span class="comment">// 错误，l1.get(0) 返回类型是 ? extends Fruit（可能是 Fruit 的任意子类）。编译器无法保证返回的是 Apple</span></span><br></pre></td></tr></table></figure>

<p>下界<code>&lt;? super T&gt;</code>不影响往里存，但往外取只能放在Object对象里。消费者。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Object&gt; objects = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">objects.add(<span class="string">&quot;我是一个字符串&quot;</span>); <span class="comment">// 存入非Apple对象</span></span><br><span class="line">List&lt;? <span class="built_in">super</span> Apple&gt; basket = objects; <span class="comment">// 合法赋值</span></span><br><span class="line"><span class="type">Apple</span> <span class="variable">apple</span> <span class="operator">=</span> basket.get(<span class="number">0</span>); <span class="comment">// 将导致ClassCastException!</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test8</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;? <span class="keyword">extends</span> <span class="title class_">Fruit</span>&gt; l1=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Apple&gt;();<span class="comment">//yes</span></span><br><span class="line">        List&lt;? <span class="keyword">extends</span> <span class="title class_">Fruit</span>&gt; l2=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Fruit&gt;();<span class="comment">//yes,Fruit可省略</span></span><br><span class="line">        List&lt;? <span class="keyword">extends</span> <span class="title class_">Fruit</span>&gt; l3=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Food&gt;();<span class="comment">//不兼容的类型。实际为 java.util.ArrayList&lt;org.rzg.Food&gt;&#x27;，需要 &#x27;java.util.List&lt;? extends org.rzg.Fruit&gt;&#x27;</span></span><br><span class="line">        List&lt;? <span class="built_in">super</span> Fruit&gt; l4=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Orange&gt;();<span class="comment">//不兼容的类型。实际为 java.util.ArrayList&lt;org.rzg.Orange&gt;&#x27;，需要 &#x27;java.util.List&lt;? super org.rzg.Fruit&gt;&#x27;</span></span><br><span class="line">        List&lt;? <span class="built_in">super</span> Fruit&gt; l5=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Food&gt;();<span class="comment">//yes</span></span><br><span class="line">        List&lt;? <span class="built_in">super</span> Fruit&gt; l6=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Fruit&gt;();<span class="comment">//yes,Fruit可省略</span></span><br><span class="line"></span><br><span class="line">        l1.add(<span class="keyword">new</span> <span class="title class_">Apple</span>());<span class="comment">//&#x27;java.util.List&#x27; 中的 &#x27;add(capture&lt;? extends org.rzg.Fruit&gt;)&#x27; 无法应用于 &#x27;(org.rzg.Apple)&#x27;</span></span><br><span class="line">        l1.add(<span class="keyword">new</span> <span class="title class_">Fruit</span>());<span class="comment">//&#x27;java.util.List&#x27; 中的 &#x27;add(capture&lt;? extends org.rzg.Fruit&gt;)&#x27; 无法应用于 &#x27;(org.rzg.Fruit)&#x27;</span></span><br><span class="line">        l1.add(<span class="keyword">new</span> <span class="title class_">Food</span>());<span class="comment">//&#x27;java.util.List&#x27; 中的 &#x27;add(capture&lt;? extends org.rzg.Fruit&gt;)&#x27; 无法应用于 &#x27;(org.rzg.Food)&#x27;</span></span><br><span class="line"></span><br><span class="line">        Fruit a1=l1.get(<span class="number">0</span>);</span><br><span class="line">        Food a2=l1.get(<span class="number">0</span>);</span><br><span class="line">        Apple a3=l1.get(<span class="number">0</span>);<span class="comment">//不兼容的类型。实际为 capture&lt;? extends org.rzg.Fruit&gt;&#x27;，需要 &#x27;org.rzg.Apple&#x27;</span></span><br><span class="line">        Orange a4=l1.get(<span class="number">0</span>);<span class="comment">//不兼容的类型。实际为 capture&lt;? extends org.rzg.Fruit&gt;&#x27;，需要 &#x27;org.rzg.Orange&#x27;</span></span><br><span class="line"></span><br><span class="line">        l5.add(<span class="keyword">new</span> <span class="title class_">Orange</span>());<span class="comment">//yes</span></span><br><span class="line">        l5.add(<span class="keyword">new</span> <span class="title class_">Apple</span>());<span class="comment">//yes</span></span><br><span class="line">        l5.add(<span class="keyword">new</span> <span class="title class_">Fruit</span>());<span class="comment">//yes</span></span><br><span class="line">        l5.add(<span class="keyword">new</span> <span class="title class_">Food</span>());<span class="comment">//&#x27;java.util.List&#x27; 中的 &#x27;add(capture&lt;? super org.rzg.Fruit&gt;)&#x27; 无法应用于 &#x27;(org.rzg.Food)&#x27;</span></span><br><span class="line"></span><br><span class="line">        Object a5=l5.get(<span class="number">0</span>);<span class="comment">//yes</span></span><br><span class="line">        Food a6=l5.get(<span class="number">0</span>);<span class="comment">//不兼容的类型。实际为 capture&lt;? super org.rzg.Fruit&gt;&#x27;，需要 &#x27;org.rzg.Food&#x27;</span></span><br><span class="line">        Fruit a7=l5.get(<span class="number">0</span>);<span class="comment">//不兼容的类型。实际为 capture&lt;? super org.rzg.Fruit&gt;&#x27;，需要 &#x27;org.rzg.Fruit&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Food</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fruit</span> <span class="keyword">extends</span> <span class="title class_">Food</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span> <span class="keyword">extends</span> <span class="title class_">Fruit</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Orange</span> <span class="keyword">extends</span> <span class="title class_">Fruit</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>总结：<strong>Producer Extends Consumer Super</strong>。</p>
<h2 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h2><p>反射：程序在运行时动态地获取类的信息并操作类或对象</p>
<p>程序在<strong>运行时</strong>可以：</p>
<ul>
<li>获取任意一个类的所有属性和方法</li>
<li>调用任意一个对象的属性和方法</li>
<li>修改任意一个对象的属性和方法</li>
<li>创建任意一个类的实例</li>
</ul>
<table>
<thead>
<tr>
<th align="left">类名</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Class</code></td>
<td align="left">表示类的实体，在运行时表示类和接口</td>
</tr>
<tr>
<td align="left"><code>Field</code></td>
<td align="left">表示类的成员变量（属性）</td>
</tr>
<tr>
<td align="left"><code>Method</code></td>
<td align="left">表示类的方法</td>
</tr>
<tr>
<td align="left"><code>Constructor</code></td>
<td align="left">表示类的构造方法</td>
</tr>
<tr>
<td align="left"><code>Modifier</code></td>
<td align="left">提供对类和成员访问修饰符的解码方法</td>
</tr>
</tbody></table>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取公有字段</span></span><br><span class="line"><span class="type">Field</span> <span class="variable">ageField</span> <span class="operator">=</span> Person.class.getField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">ageField.set(p, <span class="number">30</span>); <span class="comment">// 设置字段值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> (<span class="type">int</span>) ageField.get(p); <span class="comment">// 获取字段值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取私有字段</span></span><br><span class="line"><span class="type">Field</span> <span class="variable">nameField</span> <span class="operator">=</span> Person.class.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">nameField.setAccessible(<span class="literal">true</span>); <span class="comment">// 暴力反射，解除私有限制</span></span><br><span class="line">nameField.set(p, <span class="string">&quot;李四&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) nameField.get(p);</span><br></pre></td></tr></table></figure>



<h2 id="对象创建的四种方式"><a href="#对象创建的四种方式" class="headerlink" title="对象创建的四种方式"></a>对象创建的四种方式</h2><p>1.使用 <code>new</code> 关键字，调用构造函数。</p>
<p>2.使用 <code>Class</code> 类的 <code>newInstance()</code> 或 <code>Constructor</code> 类的 <code>newInstance()</code> (反射机制)。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = <span class="string">&quot;反射创建的默认名称&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyClass对象被创建 (通过反射，无参构造)&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyClass对象被创建 (通过反射，有参构造，name = &quot;</span> + name + <span class="string">&quot;)&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectionCreateObjectDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 方式 2a: 使用 Class.newInstance() (Java 9+ 不推荐)</span></span><br><span class="line">            <span class="comment">// MyClass obj3 = MyClass.class.newInstance(); // 已废弃</span></span><br><span class="line">            <span class="comment">// System.out.println(obj3.name);</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 方式 2b: 使用 Class.forName() 和 Class.newInstance() (Java 9+ 不推荐)</span></span><br><span class="line">            <span class="comment">// MyClass obj3_via_forName = (MyClass) Class.forName(&quot;MyClass&quot;).newInstance();</span></span><br><span class="line">            <span class="comment">// System.out.println(obj3_via_forName.name);</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 方式 2c: 使用 Constructor.newInstance() (推荐的方式)</span></span><br><span class="line">            <span class="comment">// 获取无参构造函数</span></span><br><span class="line">            java.lang.reflect.Constructor&lt;MyClass&gt; constructor1 = MyClass.class.getDeclaredConstructor();</span><br><span class="line">            <span class="type">MyClass</span> <span class="variable">obj4</span> <span class="operator">=</span> constructor1.newInstance();</span><br><span class="line">            System.out.println(obj4.name);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;---&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取带有一个String参数的构造函数</span></span><br><span class="line">            java.lang.reflect.Constructor&lt;MyClass&gt; constructor2 = MyClass.class.getDeclaredConstructor(String.class);</span><br><span class="line">            <span class="type">MyClass</span> <span class="variable">obj5</span> <span class="operator">=</span> constructor2.newInstance(<span class="string">&quot;反射创建的指定名称&quot;</span>);</span><br><span class="line">            System.out.println(obj5.name);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.使用 <code>clone()</code> 方法：<code>clone()</code> 方法是 <code>Object</code> 类中定义的一个方法，用于创建现有对象的副本。当一个对象调用 <code>clone()</code> 方法时，JVM 会在内存中创建一个与原对象相同的新对象，并复制原对象的所有字段的值到新对象中。</p>
<p>要使一个类能够被克隆，它必须实现 <code>java.lang.Cloneable</code> 接口（一个标记接口，没有方法）。否则，调用 <code>clone()</code> 会抛出 <code>CloneNotSupportedException</code>。</p>
<p><code>clone()</code> 默认执行的是浅拷贝（Shallow Copy）。如果对象包含对其他对象的引用，那么这些引用本身会被拷贝，而不是它们指向的对象。如果需要创建引用的对象的副本，则需要实现深拷贝（Deep Copy）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    Address address; <span class="comment">// 引用类型成员</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(String name, <span class="type">int</span> age, String city)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.address = <span class="keyword">new</span> <span class="title class_">Address</span>(city);</span><br><span class="line">        System.out.println(<span class="string">&quot;Employee对象被创建 (通过 new): &quot;</span> + <span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 内部类代表地址</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">        String city;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Address</span><span class="params">(String city)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.city = city;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Address [city=&quot;</span> + city + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="comment">// 浅拷贝：默认的Object.clone()实现</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.clone();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 若要实现深拷贝，需要额外处理引用类型</span></span><br><span class="line">        <span class="comment">// Employee cloned = (Employee) super.clone();</span></span><br><span class="line">        <span class="comment">// cloned.address = new Address(this.address.city); // 创建新的Address对象</span></span><br><span class="line">        <span class="comment">// return cloned;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Employee [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;, address=&quot;</span> + address + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CloneCreateObjectDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Employee</span> <span class="variable">emp1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">30</span>, <span class="string">&quot;北京&quot;</span>);</span><br><span class="line">            <span class="type">Employee</span> <span class="variable">emp2</span> <span class="operator">=</span> (Employee) emp1.clone(); <span class="comment">// 克隆对象</span></span><br><span class="line">            System.out.println(<span class="string">&quot;克隆对象 emp2: &quot;</span> + emp2);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 验证是否是不同的对象，以及浅拷贝特性</span></span><br><span class="line">            System.out.println(<span class="string">&quot;emp1 == emp2 ?: &quot;</span> + (emp1 == emp2));               <span class="comment">// false</span></span><br><span class="line">            System.out.println(<span class="string">&quot;emp1.address == emp2.address ?: &quot;</span> + (emp1.address == emp2.address)); <span class="comment">// true (浅拷贝)</span></span><br><span class="line"></span><br><span class="line">            emp2.name = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line">            emp2.address.city = <span class="string">&quot;上海&quot;</span>; <span class="comment">// 修改克隆对象的引用类型成员</span></span><br><span class="line">            System.out.println(<span class="string">&quot;修改 emp2 后：&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;emp1: &quot;</span> + emp1);</span><br><span class="line">            System.out.println(<span class="string">&quot;emp2: &quot;</span> + emp2);</span><br><span class="line">            <span class="comment">// 浅拷贝会导致 emp1 的 address 也会被修改到上海</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.使用反序列化（Deserialization）：当一个对象被<strong>序列化（Serialization）</strong> 后，它被转换为字节流并可以存储到文件或通过网络传输。反序列化就是将这些字节流重新构建成 Java 对象的过程。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">double</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Product</span><span class="params">(String name, <span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">        System.out.println(<span class="string">&quot;Product对象被创建 (通过 new): &quot;</span> + <span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 反序列化时不会调用此构造函数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Product</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Product的无参构造函数被调用 (反序列化不会调用)&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Product [name=&quot;</span> + name + <span class="string">&quot;, price=&quot;</span> + price + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeserializationCreateObjectDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Product</span> <span class="variable">originalProduct</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&quot;笔记本电脑&quot;</span>, <span class="number">8999.00</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> <span class="string">&quot;product.ser&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 序列化对象</span></span><br><span class="line">        <span class="keyword">try</span> (<span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(filename))) &#123;</span><br><span class="line">            oos.writeObject(originalProduct);</span><br><span class="line">            System.out.println(<span class="string">&quot;对象已序列化到文件: &quot;</span> + filename);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 反序列化对象</span></span><br><span class="line">        <span class="type">Product</span> <span class="variable">deserializedProduct</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filename))) &#123;</span><br><span class="line">            deserializedProduct = (Product) ois.readObject();</span><br><span class="line">            System.out.println(<span class="string">&quot;对象已从文件反序列化。&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException | ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (deserializedProduct != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;原始对象: &quot;</span> + originalProduct);</span><br><span class="line">            System.out.println(<span class="string">&quot;反序列化对象: &quot;</span> + deserializedProduct);</span><br><span class="line">            System.out.println(<span class="string">&quot;originalProduct == deserializedProduct ?: &quot;</span> + (originalProduct == deserializedProduct)); <span class="comment">// false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="注解-Annotation"><a href="#注解-Annotation" class="headerlink" title="注解 Annotation"></a>注解 Annotation</h2><p><strong>该功能并不影响程序的运行，但是会对编译器警告等辅助工具产生影响。</strong></p>
<p>当开发者<strong>误以为</strong>自己在重写方法，但实际上<strong>方法签名写错</strong>时：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        System.out.println(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    <span class="comment">// 本意想重写show(String)，但参数类型写错</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(<span class="type">int</span> num)</span> &#123;  <span class="comment">// 没有编译错误，但实际是重载而非重写</span></span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果加上 <code>@Override</code>，编译器会立即报错。</p>
<p>（其他略）</p>
<h2 id="lambda表达式"><a href="#lambda表达式" class="headerlink" title="lambda表达式"></a>lambda表达式</h2><p>lambda表达式用来表示<strong>匿名函数</strong>，也就是没有函数名字的函数。</p>
<p>用于替代冗长的<strong>匿名内部类</strong>。</p>
<p>语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(parameters) -&gt; &#123; expression or statements &#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">情况</th>
<th align="left">示例</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">无参数</td>
<td align="left"><code>() -&gt; System.out.println(&quot;Hello&quot;)</code></td>
<td align="left">空括号表示无参数</td>
</tr>
<tr>
<td align="left">单参数</td>
<td align="left"><code>s -&gt; System.out.println(s)</code></td>
<td align="left">可省略括号</td>
</tr>
<tr>
<td align="left">多参数</td>
<td align="left"><code>(a, b) -&gt; a + b</code></td>
<td align="left">需括号包围</td>
</tr>
<tr>
<td align="left">带类型</td>
<td align="left"><code>(String s) -&gt; s.length()</code></td>
<td align="left">显式声明参数类型</td>
</tr>
<tr>
<td align="left">多语句</td>
<td align="left"><code>(x, y) -&gt; &#123; int sum = x + y; return sum; &#125;</code></td>
<td align="left">使用大括号和 return</td>
</tr>
<tr>
<td align="left">空返回</td>
<td align="left"><code>msg -&gt; &#123; System.out.println(msg); &#125;</code></td>
<td align="left">无返回值时可省略 return</td>
</tr>
</tbody></table>
<p>Lambda 表达式必须与<strong>函数式接口</strong>配合使用：只包含<strong>一个抽象方法</strong>的接口。常见的函数式接口：</p>
<table>
<thead>
<tr>
<th align="left">接口</th>
<th align="left">方法签名</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Function&lt;T, R&gt;</code></td>
<td align="left"><code>R apply(T t)</code></td>
<td align="left">转换操作</td>
</tr>
<tr>
<td align="left"><code>Predicate&lt;T&gt;</code></td>
<td align="left"><code>boolean test(T t)</code></td>
<td align="left">条件判断</td>
</tr>
<tr>
<td align="left"><code>Consumer&lt;T&gt;</code></td>
<td align="left"><code>void accept(T t)</code></td>
<td align="left">消费操作</td>
</tr>
<tr>
<td align="left"><code>Supplier&lt;T&gt;</code></td>
<td align="left"><code>T get()</code></td>
<td align="left">提供对象</td>
</tr>
<tr>
<td align="left"><code>Runnable</code></td>
<td align="left"><code>void run()</code></td>
<td align="left">无参无返回</td>
</tr>
<tr>
<td align="left"><code>Comparator&lt;T&gt;</code></td>
<td align="left"><code>int compare(T o1, T o2)</code></td>
<td align="left">比较操作</td>
</tr>
</tbody></table>
<p>lambda表达式的返回值是<strong>一个函数式接口的对象</strong>。</p>
<p>举个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.lambdatest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Hi</span> &#123;</span><br><span class="line">    String <span class="title function_">sayHi</span><span class="params">(String x)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.lambdatest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Hi h= (x) -&gt; &#123;<span class="keyword">return</span> <span class="string">&quot;hello &quot;</span>+x;&#125;;</span><br><span class="line">        System.out.println(h.sayHi(<span class="string">&quot;zhang&quot;</span>));<span class="comment">//hello zhang</span></span><br><span class="line"></span><br><span class="line">        Hi h2=<span class="keyword">new</span> <span class="title class_">Hi</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">sayHi</span><span class="params">(String x)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;hello2 &quot;</span>+x;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(h2.sayHi(<span class="string">&quot;li&quot;</span>));<span class="comment">//hello2 li</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="lambda表达式与外部变量的规则与限制"><a href="#lambda表达式与外部变量的规则与限制" class="headerlink" title="lambda表达式与外部变量的规则与限制"></a>lambda表达式与外部变量的规则与限制</h3><table>
<thead>
<tr>
<th align="left">变量类型</th>
<th align="left">访问权限</th>
<th align="left">修改权限</th>
<th align="left">要求说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">局部变量</td>
<td align="left">可读</td>
<td align="left">不可修改</td>
<td align="left">必须是 final 或 effectively final</td>
</tr>
<tr>
<td align="left">实例变量</td>
<td align="left">可读</td>
<td align="left">可修改</td>
<td align="left">通过隐式 <code>this</code> 访问</td>
</tr>
<tr>
<td align="left">静态变量</td>
<td align="left">可读</td>
<td align="left">可修改</td>
<td align="left">通过类名访问</td>
</tr>
<tr>
<td align="left">方法参数</td>
<td align="left">可读</td>
<td align="left">不可修改</td>
<td align="left">同局部变量规则</td>
</tr>
</tbody></table>
<p>举个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.lambdatest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String x=<span class="string">&quot;zhang&quot;</span>;</span><br><span class="line">        Hi h1=(a)-&gt;&#123;<span class="keyword">return</span> <span class="string">&quot;hello &quot;</span>+a;&#125;;</span><br><span class="line">        System.out.println(h1.sayHi(x));</span><br><span class="line"></span><br><span class="line">        Hi h2=(a)-&gt;&#123;</span><br><span class="line">            <span class="comment">//x=&quot;li&quot;;</span></span><br><span class="line">            <span class="comment">//lambda 表达式中使用的变量应为 final 或有效 final</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;hello &quot;</span>+a+<span class="string">&quot; &quot;</span>+x;&#125;;</span><br><span class="line">        <span class="comment">//x=&quot;li&quot;;</span></span><br><span class="line">        <span class="comment">//lambda 表达式中使用的变量应为 final 或有效 final</span></span><br><span class="line">        System.out.println(h2.sayHi(x));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解释一下：当 Lambda 捕获局部变量时，实际上是捕获该变量的<strong>副本</strong>，为避免混淆，Java 禁止修改捕获的局部变量。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">captureMechanism</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="type">Runnable</span> <span class="variable">r</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">        <span class="comment">// 这里捕获的是 message 的副本</span></span><br><span class="line">        System.out.println(message); </span><br><span class="line">        <span class="comment">// message = &quot;Changed&quot;; // 禁止修改</span></span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    message = <span class="string">&quot;World&quot;</span>; <span class="comment">// 如果在 Lambda 后修改，可能导致困惑</span></span><br><span class="line">    r.run(); <span class="comment">// 输出 &quot;World&quot; 还是 &quot;Hello&quot;?</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是可以修改类成员变量：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.lambdatest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String x;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Demo3</span><span class="params">(String a)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.x=a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        Hi h=(a)-&gt;&#123;</span><br><span class="line">            x=<span class="string">&quot;li&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> a+<span class="string">&quot; &quot;</span>+x;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(h.sayHi(<span class="string">&quot;hello&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Demo3 d=<span class="keyword">new</span> <span class="title class_">Demo3</span>(<span class="string">&quot;zhang&quot;</span>);</span><br><span class="line">        d.test();<span class="comment">//hello li</span></span><br><span class="line">        System.out.println(d.x);<span class="comment">//li</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Function接口"><a href="#Function接口" class="headerlink" title="Function接口"></a>Function接口</h3><p>位置：<code>java.util.function.Function</code>，接口定义：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Function</span>&lt;T, R&gt; &#123;</span><br><span class="line">    <span class="comment">// 核心方法：应用此函数到给定参数</span></span><br><span class="line">    R <span class="title function_">apply</span><span class="params">(T t)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 组合函数：先执行当前函数，再执行 after 函数</span></span><br><span class="line">    <span class="keyword">default</span> &lt;V&gt; Function&lt;T, V&gt; <span class="title function_">andThen</span><span class="params">(Function&lt;? <span class="built_in">super</span> R, ? extends V&gt; after)</span> &#123;</span><br><span class="line">        Objects.requireNonNull(after);</span><br><span class="line">        <span class="keyword">return</span> (T t) -&gt; after.apply(apply(t));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 组合函数：先执行 before 函数，再执行当前函数</span></span><br><span class="line">    <span class="keyword">default</span> &lt;V&gt; Function&lt;V, R&gt; <span class="title function_">compose</span><span class="params">(Function&lt;? <span class="built_in">super</span> V, ? extends T&gt; before)</span> &#123;</span><br><span class="line">        Objects.requireNonNull(before);</span><br><span class="line">        <span class="keyword">return</span> (V v) -&gt; apply(before.apply(v));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 返回始终返回其输入参数的函数</span></span><br><span class="line">    <span class="keyword">static</span> &lt;T&gt; Function&lt;T, T&gt; <span class="title function_">identity</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> t -&gt; t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.lambdatest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.function.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Function&lt;Integer,String&gt; f=(a)-&gt;&#123;</span><br><span class="line">            <span class="type">int</span> b=(a+<span class="number">2</span>)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">return</span> Integer.toString(b);</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(f.apply(<span class="number">10</span>));<span class="comment">//6</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>andThen和compose使用方法：f.andThen(g) &#x3D; g(f(x))    f.compose(g) &#x3D; f(g(x))</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.lambdatest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.function.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Function&lt;Integer,String&gt; f=(a)-&gt;&#123;</span><br><span class="line">            <span class="type">int</span> b=(a+<span class="number">2</span>)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">return</span> Integer.toString(b);</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(f.apply(<span class="number">10</span>));<span class="comment">//6</span></span><br><span class="line"></span><br><span class="line">        Function&lt;Integer,String&gt; f2=(a)-&gt;&#123;</span><br><span class="line">            <span class="keyword">return</span> a+<span class="string">&quot;.123&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        Function&lt;String,Double&gt; f3=(a)-&gt;&#123;</span><br><span class="line">            <span class="keyword">return</span> Double.parseDouble(a)*<span class="number">2</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        Function&lt;Integer,Double&gt; f4=f2.andThen(f3);</span><br><span class="line">        System.out.println(f4.apply(<span class="number">12</span>));<span class="comment">//24.246</span></span><br><span class="line">        Function&lt;Integer,Double&gt; f5=f3.compose(f2);</span><br><span class="line">        System.out.println(f5.apply(<span class="number">12</span>));<span class="comment">//24.246</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h3><p>语法：<code>对象名::成员方法名</code></p>
<p>返回一个对象，这个对象可能是<code>Consumer</code>, <code>Function</code> 等。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.lambdatest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Hi h=Demo5::fun;</span><br><span class="line">        System.out.println(h.sayHi(<span class="string">&quot;zhang&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> String <span class="title function_">fun</span><span class="params">(String x)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello &quot;</span>+x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="流处理"><a href="#流处理" class="headerlink" title="流处理"></a>流处理</h2><p>流（Stream），从数据源（集合、数组、I&#x2F;O等）获取数据，类似SQL的操作。</p>
<p>流处理三大阶段：创建流，中间操作，终端操作。</p>
<p>创建：<code>Stream&lt;String&gt; listStream = list.stream();</code></p>
<p>中间操作：<code>filter(Predicate)</code>，<code>map(Function)</code></p>
<p>终端操作：<code>forEach(Consumer)</code>，<code>collect(Collector)</code></p>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p>举一个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.streamuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; l=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">            l.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        Demo1.print(l);</span><br><span class="line"></span><br><span class="line">        Stream&lt;Integer&gt; s=l.stream();</span><br><span class="line">        s=s.filter((a)-&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span>(a%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        List&lt;Integer&gt; l2=s.toList();</span><br><span class="line">        Demo1.print(l2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(List l)</span>&#123;</span><br><span class="line">        l.stream().forEach(</span><br><span class="line">                (x)-&gt; System.out.println(x+<span class="string">&quot; &quot;</span>)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>简单数据查询，“获取流”“过滤流”“封装流”可以写在一起（支持链式函数操作，filter, map, reduce等）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.streamuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Employee&gt; l=Employee.getEmpList();</span><br><span class="line">        List&lt;Employee&gt; l2=l.stream()</span><br><span class="line">                .filter(p-&gt;p.getAge()&gt;=<span class="number">30</span>)</span><br><span class="line">                .distinct()</span><br><span class="line">                .limit(<span class="number">2</span>)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        l2.stream().forEach(x-&gt;System.out.println(x));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.streamuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.DoubleStream;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Employee&gt; l=Employee.getEmpList();</span><br><span class="line">        Stream&lt;Employee&gt; s=l.stream().filter(x-&gt;x.getDept().equals(<span class="string">&quot;销售部&quot;</span>));</span><br><span class="line">        List&lt;Employee&gt; tmp=s.collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        Stream&lt;String&gt; names=tmp.stream().map(Employee::getName);<span class="comment">//lambda中的方法引用。等效x-&gt;x.getName()</span></span><br><span class="line">        names.forEach(x-&gt;System.out.println(x));</span><br><span class="line"></span><br><span class="line">        DoubleStream salarys=tmp.stream().mapToDouble(Employee::getSalary);</span><br><span class="line">        System.out.println(salarys.sum());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><p>返回一个值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reduce(初始值init, 二元操作函数op)</span><br></pre></td></tr></table></figure>

<p>数学表达式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = init op a1 op a2 op a3 ... op an</span><br></pre></td></tr></table></figure>

<p>举例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.streamuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Double</span> <span class="variable">min</span> <span class="operator">=</span> Employee.getEmpList()</span><br><span class="line">                .stream()</span><br><span class="line">                .map(Employee::getSalary)</span><br><span class="line">                .reduce(Double.MAX_VALUE, (a, b) -&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (a &lt; b) &#123;</span><br><span class="line">                        <span class="keyword">return</span> a;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> b;</span><br><span class="line">                &#125;);</span><br><span class="line">        System.out.println(min);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h3><p>Collectors类提供的groupingBy()方法就是用来进行分组的，参数是Function对象，结果封装在Map对象中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.streamuse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GroupingDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Map&lt;String,List&lt;Employee&gt;&gt; m=Employee</span><br><span class="line">                .getEmpList()</span><br><span class="line">                .stream()</span><br><span class="line">                .collect(Collectors.groupingBy(Employee::getDept));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(String dept:m.keySet())&#123;</span><br><span class="line">            System.out.println(dept+<span class="string">&quot;:&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(Employee e:m.get(dept))&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;\t&quot;</span>+e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><p>进程是操作系统分配资源的基本单位，线程是处理器调度任务和执行的基本单位。</p>
<p><img src="image-20250714092447218.png"></p>
<h3 id="线程创建"><a href="#线程创建" class="headerlink" title="线程创建"></a>线程创建</h3><p>三种方法：Thread、Runnable、Callable。</p>
<p>Thread：直接继承 <code>java.lang.Thread</code> 类，重写 <code>run()</code> 方法，调用 <code>start()</code> 启动。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">            System.out.print(i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Demo1</span>().start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Demo1</span>().start();</span><br><span class="line">        <span class="comment">//0 0 1 1 2 3 2 4 5 6 7 8 3 9 4 5 6 7 8 9</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runnable：实现 <code>java.lang.Runnable</code> 接口 <code>run()</code> 方法，<strong>通过 <code>Thread</code> 类构造函数传入 Runnable 对象</strong>，调用 <code>start()</code> 启动。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Runnable r1=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">                System.out.println(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t1=<span class="keyword">new</span> <span class="title class_">Thread</span>(r1);</span><br><span class="line">        Thread t2=<span class="keyword">new</span> <span class="title class_">Thread</span>(r1);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        TaskTest t=<span class="keyword">new</span> <span class="title class_">TaskTest</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(t).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(t).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(t).start();</span><br><span class="line">        <span class="comment">//4 2 3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TaskTest</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> a;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TaskTest</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.a=a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        a++;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Callable：线程池实现，后面再解释。</p>
<h3 id="线程休眠"><a href="#线程休眠" class="headerlink" title="线程休眠"></a>线程休眠</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Runnable r1=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;curr:&quot;</span>+i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(r1).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="线程加入"><a href="#线程加入" class="headerlink" title="线程加入"></a>线程加入</h3><p>如果线程A中调用了线程B的join方法，那么线程A阻塞，直到线程B执行完后，线程A从阻塞状态转为就绪状态，等待获取CPU的使用权。</p>
<p>如果你在主线程中调用了 <code>t.join()</code>，那么主线程就会暂停，直到线程 <code>t</code> 执行完毕。</p>
<p>举个例子，有无join的对比：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">r1</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                System.out.print(i + <span class="string">&quot;-&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">r2</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                System.out.print(i + <span class="string">&quot;+&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r1);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r2);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        <span class="comment">//并发执行</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        0-1-2-3-0+1+2+3+4+</span></span><br><span class="line"><span class="comment">        4-</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">r1</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                System.out.print(i + <span class="string">&quot;-&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">r2</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                System.out.print(i + <span class="string">&quot;+&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r1);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r2);</span><br><span class="line">        t1.start();     <span class="comment">// 启动 t1</span></span><br><span class="line">        t1.join();      <span class="comment">// 主线程等待 t1 执行完成</span></span><br><span class="line">        t2.start();     <span class="comment">// 再启动 t2</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        0-1-2-3-4-</span></span><br><span class="line"><span class="comment">        0+1+2+3+4+</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="线程礼让"><a href="#线程礼让" class="headerlink" title="线程礼让"></a>线程礼让</h3><p><code>yield()</code> 是 <code>Thread</code> 类的一个静态方法，用来<strong>暂停当前正在运行的线程</strong>，把 <strong>CPU 执行权</strong> 让给其他线程（如果有相同优先级的线程在等待）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo6</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Runnable r1=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;A&quot;</span>+i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (i==<span class="number">3</span>)&#123;</span><br><span class="line">                    Thread.<span class="keyword">yield</span>();<span class="comment">// 尝试让出CPU</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Runnable r2=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;B&quot;</span>+i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t1=<span class="keyword">new</span> <span class="title class_">Thread</span>(r1);</span><br><span class="line">        Thread t2=<span class="keyword">new</span> <span class="title class_">Thread</span>(r2);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>A在调用yield之后会礼让进程，回到就绪态，让B先执行。</p>
<p><code>yield()</code> <strong>使用场景较少</strong>，它不能确保调度器会切换线程，也不能用于可靠的线程控制。</p>
<h3 id="线程中断"><a href="#线程中断" class="headerlink" title="线程中断"></a>线程中断</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>interrupt()</code></td>
<td>设置中断标志位为 true</td>
</tr>
<tr>
<td><code>isInterrupted()</code></td>
<td>检查当前线程的中断状态，不会清除标志</td>
</tr>
<tr>
<td><code>Thread.interrupted()</code></td>
<td>检查当前线程的中断状态，并<strong>清除中断标志</strong></td>
</tr>
</tbody></table>
<p>中断只是告诉线程“该停了”，至于它停不停、怎么停，由线程自己决定。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Runnable r=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Working&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t=<span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line">        t.start();</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        t.interrupt();<span class="comment">// 中断无效，因为线程没检测中断标志</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo8</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Runnable r=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>(Thread.currentThread().isInterrupted())&#123; <span class="comment">//轮询 + 响应中断</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;被中断，退出&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;Working&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t=<span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line">        t.start();</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        t.interrupt();<span class="comment">// 发出中断信号，线程自己停下来</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当线程在执行 <code>sleep()</code>、<code>wait()</code>、<code>join()</code> 这类 <strong>阻塞方法</strong> 时，如果被 <code>interrupt()</code> 中断会立刻抛出 <code>InterruptedException</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Runnable r=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Working&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;线程中断！&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t=<span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line">        t.start();</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        t.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Working</span><br><span class="line">Working</span><br><span class="line">Working</span><br><span class="line">线程中断！</span><br></pre></td></tr></table></figure>

<h3 id="线程同步初步"><a href="#线程同步初步" class="headerlink" title="线程同步初步"></a>线程同步初步</h3><p>为什么需要同步？因为会脏数据：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo9</span> &#123;</span><br><span class="line">    <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Demo9 d=<span class="keyword">new</span> <span class="title class_">Demo9</span>();</span><br><span class="line">        Runnable r1=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10000</span>;i++)&#123;</span><br><span class="line">                d.add();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Runnable r2=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10000</span>;i++)&#123;</span><br><span class="line">                d.add();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t1=<span class="keyword">new</span> <span class="title class_">Thread</span>(r1);</span><br><span class="line">        Thread t2=<span class="keyword">new</span> <span class="title class_">Thread</span>(r2);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br><span class="line">        System.out.println(<span class="string">&quot;finally: &quot;</span>+d.count);<span class="comment">//finally: 17198远小于20000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>加上同步之后的结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo9</span> &#123;</span><br><span class="line">    <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Demo9 d=<span class="keyword">new</span> <span class="title class_">Demo9</span>();</span><br><span class="line">        Runnable r1=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10000</span>;i++)&#123;</span><br><span class="line">                d.add();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Runnable r2=()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10000</span>;i++)&#123;</span><br><span class="line">                d.add();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Thread t1=<span class="keyword">new</span> <span class="title class_">Thread</span>(r1);</span><br><span class="line">        Thread t2=<span class="keyword">new</span> <span class="title class_">Thread</span>(r2);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br><span class="line">        System.out.println(<span class="string">&quot;finally: &quot;</span>+d.count);<span class="comment">//finally: 20000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>两种写法，第二种：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="built_in">this</span>)&#123; <span class="comment">//this指的是当前对象</span></span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用法：</p>
<p>修饰方法，锁住<strong>当前对象实例</strong>（相当于 <code>synchronized(this)</code>）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">    count++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修饰静态方法，锁住当前类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同步代码块</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(<span class="built_in">this</span>) &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以指定其它对象作为锁</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(lock) &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>synchronized可以实现原子性，可见性（修改及时可见），有序性（一个锁的unlock先发生于后面锁的lock）。</strong></p>
<p>synchronized是非公平的（先阻塞不一定先唤醒）。</p>
<h3 id="CAS-比较并交换"><a href="#CAS-比较并交换" class="headerlink" title="CAS 比较并交换"></a>CAS 比较并交换</h3><p><strong>CAS</strong> (Compare And Swap，比较并交换) 是计算机科学中一种重要的<strong>原子操作</strong>，用于实现多线程环境下的同步。它是一种乐观锁（Optimistic Locking）的实现方式，被广泛应用于构建非阻塞算法（Non-blocking Algorithms）和并发数据结构中。</p>
<p><strong>什么是乐观锁：</strong>它假定在大多数情况下，多线程对共享变量的访问不会发生冲突。线程会尝试去更新变量的值，而不是先获取锁。</p>
<p>如果发现变量的当前值与自己预期的一致，就说明没有冲突，更新成功。</p>
<p>如果发现变量的当前值与自己预期的不一致，说明在自己获取预期值到尝试更新之间，有其他线程已经更新了该变量。此时，当前线程不会阻塞，而是可以选择：</p>
<ul>
<li>重试： 重新读取变量的最新值，并再次尝试 CAS 操作，直到成功。（这被称为“自旋”，忙等待）</li>
<li>放弃： 如果业务允许，也可以直接放弃本次操作。</li>
</ul>
<p><strong>CAS 操作包含三个操作数：</strong></p>
<ul>
<li>V (Value)：内存位置（或变量）的当前值。</li>
<li>A (Expected_A)：预期原值。</li>
<li>B (New_B)：希望修改后的新值。</li>
</ul>
<p>CAS 的操作逻辑是：</p>
<p>如果内存位置 V 的当前值与预期原值 A 相匹配，那么处理器会自动将该位置的值更新为新值 B。否则，不做任何操作。 无论成功与否，CAS 操作都会返回 V 当前的真实值（或者一个布尔值指示是否成功）。</p>
<p>关键点在于： 这个“比较”和“交换”的整个过程是原子性地完成的，即它是一个不可中断的操作。这是由底层硬件指令（如 X86 架构上的 cmpxchg 指令）保证的，无需使用操作系统级的互斥锁（如 synchronized）。</p>
<p><strong>CAS的三个缺陷：</strong></p>
<ol>
<li><strong>A-B-A 问题：</strong><ul>
<li><strong>问题描述：</strong> 假设线程 A 从内存中读取了变量 V 的值为 A。线程 B 随后也读取了变量 V 的值 A，并将其修改为 B，然后又将 V 的值改回了 A。此时，线程 A 再次执行 CAS 操作，发现 V 的当前值是 A，与自己之前读取的预期值 A 相同，于是认为没有发生变化，从而成功执行了交换。</li>
<li><strong>潜在危险：</strong> 尽管值回到了 A，但实际上变量已被修改过。在某些场景下，这可能导致逻辑上的错误。例如，一个栈的指针，弹出 A，再压入 A，指针值不变，但对象引用已经不同。</li>
<li><strong>解决方案：</strong> Java 提供了 <code>AtomicStampedReference</code> 和 <code>AtomicMarkableReference</code>。它们在比较时不仅比较值，还会比较一个“版本号”（stamp）或“标记”（mark）。只有值和版本号&#x2F;标记都匹配时，CAS 操作才成功。</li>
</ul>
</li>
<li><strong>循环时间长开销大 (自旋导致的 CPU 消耗)：</strong><ul>
<li>如果 CAS 乐观的假设不成立（即竞争激烈），导致 CAS 操作总是失败，那么线程会一直自旋，反复尝试，这会长时间占用 CPU 资源，造成 CPU 浪费。</li>
<li>在 JVM 层面，Java 本身对自旋有一定的优化，例如如果自旋次数过多，会挂起线程或者让出 CPU 时间片。</li>
</ul>
</li>
<li><strong>只能保证一个共享变量的原子操作：</strong><ul>
<li>CAS 只能针对一个共享变量进行原子操作。</li>
<li>如果你需要对多个共享变量进行原子性操作，或者需要原子地执行一个代码块，CAS 就不够用了，需要使用 <code>synchronized</code>、<code>Lock</code>，或者将多个变量封装成一个对象，然后使用 <code>AtomicReference</code> 来进行 CAS 操作。</li>
</ul>
</li>
</ol>
<h3 id="Synchronized-锁升级"><a href="#Synchronized-锁升级" class="headerlink" title="Synchronized 锁升级"></a>Synchronized 锁升级</h3><p>一个对象的锁状态由其对象头（Object Header）中的 Mark Word（标记字）来记录。Mark Word 中包含了一系列位，用来存储哈希码、GC 年龄、锁标志位以及偏向线程 ID 等信息。</p>
<p>四种状态：</p>
<p>无锁：字如其名。当一个线程第一次访问同步块时，如果对象当前处于无锁状态，升级为偏向锁。</p>
<p>偏向锁：后续该线程再次进入同步块时，无需任何同步操作（CAS），只需简单检查 <code>Mark Word</code> 里的线程 ID 是否是自己，如果是，就代表已经获得了锁，可以直接执行。</p>
<p>轻量锁：当有另一个线程尝试获取这个已经被偏向的对象的锁时，偏向锁就会被撤销。每个线程在自己的栈帧（Stack Frame）中创建一个锁记录（Lock Record）空间。线程尝试使用 CAS (Compare-And-Swap) 操作将对象的 Mark Word 替换为指向自己栈帧中锁记录的指针。如果 CAS 失败（说明有其他线程同时在竞争），则尝试进行自旋（Spinning）：线程不会立即阻塞，而是在一个循环中不断尝试获取锁，期望在短时间内其他线程会释放锁。</p>
<p>重量级锁：轻量级锁自旋达到一定次数（或时间）后仍未成功获取锁，退化为传统的监视器锁（Monitor Lock），也就是我们常说的 synchronized 锁。</p>
<h3 id="线程协作"><a href="#线程协作" class="headerlink" title="线程协作"></a>线程协作</h3><p> <strong><code>wait()</code> 和 <code>notify()</code></strong> 是 Java 最底层的<strong>线程间协作机制</strong>，常用于<strong>线程等待 &#x2F; 唤醒</strong>的场景。</p>
<p>它们不是 <code>Thread</code> 类的方法，是所有对象都继承的 <code>Object</code> 类方法。<strong>必须在同步代码块或同步方法中使用</strong>，即必须先获得锁。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>wait()</code></td>
<td>当前线程进入等待状态，释放锁</td>
</tr>
<tr>
<td><code>notify()</code></td>
<td>唤醒<strong>一个</strong>正在 <code>wait()</code> 的线程</td>
</tr>
<tr>
<td><code>notifyAll()</code></td>
<td>唤醒所有等待该锁的线程</td>
</tr>
</tbody></table>
<p>例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo10</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;Double&gt; l=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> hasProduct=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        Thread consumer=<span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (l)&#123;</span><br><span class="line">                    <span class="keyword">while</span> (!hasProduct)&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            l.wait();<span class="comment">// 等待生产者生产</span></span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;&#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(<span class="string">&quot;consume&quot;</span>);</span><br><span class="line">                    l.clear();</span><br><span class="line">                    hasProduct=<span class="literal">false</span>;</span><br><span class="line">                    l.notify();<span class="comment">// 通知生产者可以生产了</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread producer=<span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (l)&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;produce&quot;</span>);</span><br><span class="line">                    l.add(Math.random());</span><br><span class="line">                    hasProduct=<span class="literal">true</span>;</span><br><span class="line">                    l.notify();<span class="comment">// 通知消费者</span></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        l.wait();<span class="comment">// 等待消费者消费完</span></span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;&#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        producer.start();</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        consumer.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="线程创建-Callable"><a href="#线程创建-Callable" class="headerlink" title="线程创建 Callable"></a>线程创建 Callable</h3><p>Callable执行之后有返回值，而Runnable是没有返回值的。</p>
<p>通常，<code>Callable</code> 会和 <code>ExecutorService</code> 一起使用，<code>ExecutorService</code> 提供了一个 <code>submit()</code> 方法来提交 <code>Callable</code> 任务，并且返回一个 <code>Future</code> 对象。</p>
<p><code>Future</code> 用来获取任务执行结果或者处理任务的异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Future;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo14</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        ExecutorService s= Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line">        Callable&lt;Integer&gt; c=()-&gt;&#123;</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">10</span>+<span class="number">20</span>;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        Future&lt;Integer&gt; f=s.submit(c);</span><br><span class="line">        System.out.println(<span class="string">&quot;现在可以在main干其他事情&quot;</span>);</span><br><span class="line">        System.out.println(f.get());<span class="comment">//如果任务还未完成，get() 会阻塞当前线程直到任务完成。</span></span><br><span class="line">        s.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="线程死锁"><a href="#线程死锁" class="headerlink" title="线程死锁"></a>线程死锁</h3><p>四个条件：互斥，请求与保持，不剥夺，循环等待。</p>
<p>解决方案：破坏四个条件之一；锁排序法，只有获取A锁才能获取B锁。</p>
<h3 id="Volatile"><a href="#Volatile" class="headerlink" title="Volatile"></a>Volatile</h3><p>volatile 是 Java 提供的一个轻量级同步机制，它主要用于解决多线程环境中的可见性（Visibility） 和阻止指令重排序。它不提供互斥访问（Mutual Exclusion）的保证，因此不能替代 synchronized 或 Lock 进行原子性操作</p>
<p>volatile 关键字的主要作用是保证被<strong>修饰变量</strong>在多线程之间的<strong>可见性和有序性</strong>。</p>
<p><strong>可见性 (Visibility)</strong></p>
<p>问题： 在多核处理器架构下，每个处理器都有自己的高速缓存（Cache）。当一个线程修改了一个变量的值，这个修改可能仅仅是写到了其所在的 CPU 核心的缓存中，而没有立即同步到主内存（Main Memory）。另一核心的线程可能读取的是旧的缓存值，导致数据不一致。</p>
<p>volatile 保证：</p>
<p>当写一个 volatile 变量时，JVM 会把该线程对应的本地内存（缓存）中的共享变量刷新到主内存中。</p>
<p>当读一个 volatile 变量时，JVM 会把该线程对应的本地内存中的共享变量设置为无效，强制从主内存中重新读取最新值。</p>
<p>结果： 任何线程对 volatile 变量的修改都会立即对其他线程可见。</p>
<p><strong>有序性 (Ordering) &#x2F; 禁止指令重排序</strong></p>
<p>问题： 编译器和处理器为了优化性能，可能会对指令进行重排序。这种重排序在单线程环境下不会改变程序的执行结果，但在多线程环境下可能会导致意想不到的问题。</p>
<p>volatile 保证：</p>
<p>写入 volatile 变量之前的操作： 不能被重排序到 volatile 写入之后。读取 volatile 变量之后的操作： 不能被重排序到 volatile 读取之前。跨 volatile 操作的重排序： 编译器和运行时会插入内存屏障（Memory Barrier），确保 volatile 操作的指令不能跨越这些屏障被重排序。</p>
<p>具体来说，volatile 变量的读写会遵循 JSR-133 内存模型规范定义的 happens-before 规则：对一个 volatile 变量的写操作 happens-before 后续对同一个 volatile 变量的读操作。在写 volatile 变量前，所有可见的共享变量值都能保证在写 volatile 后对其它线程可见。在读 volatile 变量后，所有读到的共享变量都保证是最新的值。</p>
<p><strong>实现原理</strong></p>
<p>volatile 的可见性和有序性是依靠插入特定的内存屏障（Memory Barrier &#x2F; Memory Fence）来实现的。</p>
<p>对于 volatile 变量的写操作：</p>
<p>在 volatile 写操作之前插入一个 StoreStore 屏障。在 volatile 写操作之后插入一个 StoreLoad 屏障。</p>
<p>StoreStore Barrier：确保写 volatile 变量的操作不会与其之前的任何写操作重排序。（写写重排序）</p>
<p>StoreLoad Barrier：确保写 volatile 变量的操作不会与其之后的任何读操作或写操作重排序。这个屏障是最强的，它是一个全能屏障，可以阻止 LoadLoad, LoadStore, StoreLoad, StoreStore 所有的重排序。 这个屏障还会导致 CPU 缓存失效，将最新的数据刷新到主内存。</p>
<p>对于 volatile 变量的读操作：</p>
<p>在 volatile 读操作之后插入一个 LoadLoad 屏障。在 volatile 读操作之后插入一个 LoadStore 屏障。</p>
<p>LoadLoad Barrier：确保读 volatile 变量的操作不会与其之后的任何读操作重排序。（读读重排序）</p>
<p>LoadStore Barrier：确保读 volatile 变量的操作不会与其之后的任何写操作重排序。（读写重排序）读操作之前会强制从主内存读取最新值，而非从本地缓存。</p>
<p>这些内存屏障指令会强制 CPU 缓存与主内存同步，并阻止特定类型的指令重排序，从而确保了 volatile 的语义。</p>
<table>
<thead>
<tr>
<th align="left">特性 &#x2F; 方面</th>
<th align="left"><code>volatile</code> 关键字</th>
<th align="left"><code>synchronized</code> 关键字</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>主要功能</strong></td>
<td align="left"><strong>保证可见性</strong> 和 <strong>禁止指令重排序</strong>。</td>
<td align="left"><strong>保证原子性</strong>、<strong>保证可见性</strong> 和 <strong>保证有序性</strong>。</td>
</tr>
<tr>
<td align="left"><strong>解决问题</strong></td>
<td align="left">解决多线程环境下对共享变量修改后的<strong>可见性</strong>问题，<br>以及避免<strong>指令重排序</strong>导致的问题。</td>
<td align="left">解决多线程环境下对共享资源的<strong>同步</strong>问题，<br>确保在同一时刻只有一个线程访问临界区，<br>从而保证数据<strong>一致性</strong>。</td>
</tr>
<tr>
<td align="left"><strong>操作粒度</strong></td>
<td align="left">变量级别。通常用于修饰共享的类成员变量。</td>
<td align="left">代码块或方法级别。用于修饰方法或代码块。</td>
</tr>
<tr>
<td align="left"><strong>原子性</strong></td>
<td align="left"><strong>不保证原子性</strong>（除了对 <code>long</code> 和 <code>double</code> 的 64 位写操作理论上保证原子性，但读操作不保证）。</td>
<td align="left"><strong>保证原子性</strong>：一个线程进入同步块后，会独占访问临界区，直到退出，期间其他线程无法进入。</td>
</tr>
<tr>
<td align="left"><strong>可见性</strong></td>
<td align="left"><strong>保证可见性</strong>：对 <code>volatile</code> 变量的修改会立即刷新到主内存，其他线程读取时会从主内存重新加载最新值。</td>
<td align="left"><strong>保证可见性</strong>：<br>1. 线程释放锁时，会把对共享变量的修改刷新到主内存。<br>2. 线程获取锁时，会清空工作内存，从主内存读取共享变量的最新值。</td>
</tr>
<tr>
<td align="left"><strong>有序性</strong></td>
<td align="left"><strong>保证有序性</strong>：通过插入<strong>内存屏障</strong>来禁止<code>volatile</code>前后相关的指令重排序。</td>
<td align="left"><strong>保证有序性（一个锁的unlock先发生于后面锁的lock），但变量可能被编译器优化</strong>：<br>1. 通过锁的获取和释放，确保临界区内的指令不会被重排序到临界区外。<br>2. 临界区内的操作是按程序顺序执行的。</td>
</tr>
<tr>
<td align="left"><strong>实现机制</strong></td>
<td align="left">依赖 JVM 层面插入<strong>内存屏障</strong>指令，确保读写操作的顺序性。<br>（底层依赖于 CPU 针对内存总线的 LOCK 前缀指令）。</td>
<td align="left">依赖 JVM 层面基于对象头的<strong>监视器锁（Monitor）</strong>，<br>通过 <code>monitorenter</code> 和 <code>monitorexit</code> 指令实现。</td>
</tr>
<tr>
<td align="left"><strong>锁定</strong></td>
<td align="left">不涉及数据锁定。</td>
<td align="left">悲观锁机制：阻塞其他线程对共享资源的访问。</td>
</tr>
<tr>
<td align="left"><strong>性能开销</strong></td>
<td align="left">相对较低。仅涉及内存屏障和缓存一致性协议，不会引起线程上下文切换。</td>
<td align="left">相对较高。可能引起线程阻塞和唤醒，导致上下文切换开销。</td>
</tr>
<tr>
<td align="left"><strong>使用场景</strong></td>
<td align="left">1. <strong>状态标记量</strong>：例如中断标志、只通过一个线程修改，其他线程读取的计数器等。<br>2. <strong>开销敏感的简单同步</strong>：当且仅当需要保证可见性和有序性，且不涉及复合操作时。<br>3. 实现<strong>双重检查锁定 (DCL)</strong> 的最佳实践。</td>
<td align="left">1. <strong>保护临界区</strong>：确保共享资源的原子性、可见性和有序性。<br>2. <strong>复合操作</strong>：例如 <code>i++</code> 这种包含“读-改-写”三步的非原子性操作。<br>3. <strong>线程安全的数据结构</strong>：如 <code>Collections.synchronizedList()</code>。</td>
</tr>
<tr>
<td align="left"><strong>是否可用于<br>非原子操作</strong></td>
<td align="left"><strong>不可</strong>。不能保证复合操作（如 <code>i++</code>）的原子性。</td>
<td align="left"><strong>可用于</strong>。将复合操作放入同步块中，即可保证其原子性。</td>
</tr>
<tr>
<td align="left"><strong>适用范围</strong></td>
<td align="left">主要用于解决共享变量的可见性问题。</td>
<td align="left">更广泛的同步机制，用于解决线程间的竞争问题。</td>
</tr>
</tbody></table>
<h3 id="Lock（ReentrantLock）"><a href="#Lock（ReentrantLock）" class="headerlink" title="Lock（ReentrantLock）"></a>Lock（ReentrantLock）</h3><table>
<thead>
<tr>
<th align="left">特性 &#x2F; 方面</th>
<th align="left"><code>synchronized</code> 关键字</th>
<th align="left"><code>Lock</code> 接口 (主要指 <code>java.util.concurrent.locks.ReentrantLock</code>)</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>本质</strong></td>
<td align="left">JVM 层面的内置锁（<strong>隐式锁</strong>），基于对象头的 Monitor。</td>
<td align="left">Java API 层面的<strong>显式锁</strong>，通过 <code>Lock</code> 接口和实现类（如 <code>ReentrantLock</code>）来实现。</td>
</tr>
<tr>
<td align="left"><strong>使用方式</strong></td>
<td align="left">隐式：通过 <code>synchronized</code> 关键字修饰方法或代码块。</td>
<td align="left">显式：需要手动调用 <code>lock()</code> 方法获取锁，<code>unlock()</code> 方法释放锁，通常放在 <code>finally</code> 块中确保释放。</td>
</tr>
<tr>
<td align="left"><strong>锁的获取与释放</strong></td>
<td align="left">自动：当进入同步代码块&#x2F;方法时自动获取锁，当退出时自动释放锁（包括异常退出）。</td>
<td align="left">手动：必须程序员手动获取和释放锁。如果忘记释放，可能导致死锁。</td>
</tr>
<tr>
<td align="left"><strong>可中断性</strong></td>
<td align="left">不可中断：线程在等待 <code>synchronized</code> 锁时，无法响应中断。</td>
<td align="left">可中断：提供 <code>lockInterruptibly()</code> 方法，允许在等待锁的过程中响应中断并退出等待。</td>
</tr>
<tr>
<td align="left"><strong>公平性</strong></td>
<td align="left">非公平锁：默认是非公平锁（无法保证等待线程获取锁的顺序），有少量选择变为公平锁（由JVM实现）。</td>
<td align="left">可选择：默认是非公平锁，但可以通过构造函数参数（<code>new ReentrantLock(true)</code>）指定为公平锁。</td>
</tr>
<tr>
<td align="left"><strong>绑定多个条件</strong></td>
<td align="left">不支持：一个 <code>synchronized</code> 锁只能有一个等待队列。</td>
<td align="left">支持：通过 <code>Condition</code> 接口，一个 <code>Lock</code> 对象可以创建多个 <code>Condition</code> 对象，每个 <code>Condition</code> 对象都有自己的等待队列，实现更精细的线程间协作。</td>
</tr>
<tr>
<td align="left"><strong>尝试获取锁</strong></td>
<td align="left">不支持：线程要么获取锁成功，要么一直阻塞等待。</td>
<td align="left">支持：提供 <code>tryLock()</code> 方法，允许在指定时间内尝试获取锁，或立即返回是否获取成功。</td>
</tr>
<tr>
<td align="left"><strong>异常处理</strong></td>
<td align="left">自动处理：一旦发生异常，JVM 会自动释放锁。</td>
<td align="left">手动处理：必须在 <code>finally</code> 块中 <code>unlock()</code>，否则发生异常时锁可能无法释放。</td>
</tr>
</tbody></table>
<p>ReentrantLock相比于synchronized主要的优势：等待锁时可中断；可以实现公平锁（先等待的线程先获得锁）；可实现选择性通知，可以绑定多个条件，实现选择性通知。</p>
<h3 id="ReentrantReadWriteLock"><a href="#ReentrantReadWriteLock" class="headerlink" title="ReentrantReadWriteLock"></a>ReentrantReadWriteLock</h3><table>
<thead>
<tr>
<th align="left">特性 &#x2F; 方面</th>
<th align="left"><code>ReentrantLock</code></th>
<th align="left"><code>ReadWriteLock</code> (接口) &#x2F; <code>ReentrantReadWriteLock</code> (实现类)</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>锁的类型</strong></td>
<td align="left"><strong>独占锁 (Exclusive Lock)</strong> 或 <strong>排他锁</strong>。</td>
<td align="left">**读写锁 (Shared-Exclusive Lock)**。分为读锁和写锁。</td>
</tr>
<tr>
<td align="left"><strong>并发性</strong></td>
<td align="left"><strong>低并发性</strong>：在任何时刻，只允许一个线程持有锁。其他线程必须等待。</td>
<td align="left"><strong>高并发性</strong>：<br>1. <strong>读读并发</strong>：允许多个读线程同时持有读锁。<br>2. <strong>读写互斥</strong>：读锁与写锁互斥，写线程在有读锁时不能获取写锁，读线程在有写锁时不能获取读锁。<br>3. <strong>写写互斥</strong>：只允许一个写线程持有写锁。</td>
</tr>
<tr>
<td align="left"><strong>适用场景</strong></td>
<td align="left">适用于<strong>读写操作都频繁改变共享资源</strong>的场景。或者，当大部分操作都是写操作或者读写比例接近时。</td>
<td align="left">适用于<strong>读多写少</strong>的场景。当对共享资源的读操作远多于写操作时，使用 <code>ReadWriteLock</code> 可以显著提高并发性能。</td>
</tr>
<tr>
<td align="left"><strong>获取方式</strong></td>
<td align="left">一个 <code>lock()</code> 方法获取锁。</td>
<td align="left">两个独立的锁：<code>readLock()</code> 获取读锁，<code>writeLock()</code> 获取写锁。</td>
</tr>
<tr>
<td align="left"><strong>方法</strong></td>
<td align="left"><code>lock()</code>, <code>unlock()</code>, <code>tryLock()</code>, <code>lockInterruptibly()</code>, <code>newCondition()</code></td>
<td align="left"><code>readLock().lock()</code>, <code>readLock().unlock()</code><br><code>writeLock().lock()</code>, <code>writeLock().unlock()</code><br>同样支持 <code>tryLock()</code>, <code>lockInterruptibly()</code>, <code>newCondition()</code> 等。</td>
</tr>
<tr>
<td align="left"><strong>重入性</strong></td>
<td align="left">支持：同一个线程可以多次获取同一个 <code>ReentrantLock</code>。</td>
<td align="left">支持：读写锁都是可重入的。读锁和写锁可以独立重入。此外，在某些实现中，一个线程持有写锁后可以再获取读锁（锁降级），但反之不行。</td>
</tr>
<tr>
<td align="left"><strong>锁降级（Downgrade）</strong></td>
<td align="left">不适用。</td>
<td align="left">支持：一个线程获取写锁后，可以再获取读锁，然后释放写锁。这是安全的，因为写锁是独占的，获取了写锁的线程可以随意获取读锁。</td>
</tr>
<tr>
<td align="left"><strong>锁升级（Upgrade）</strong></td>
<td align="left">不适用。</td>
<td align="left">不支持：一个线程持有读锁后，<strong>不能直接</strong>获取写锁。尝试获取会造成死锁，因为此时可能还有其他读锁存在，导致写锁无法获取。如果需要升级，必须先释放所有读锁，再获取写锁。</td>
</tr>
<tr>
<td align="left"><strong>底层实现</strong></td>
<td align="left">基于 <code>AQS (AbstractQueuedSynchronizer)</code>。</td>
<td align="left">也是基于 <code>AQS (AbstractQueuedSynchronizer)</code>。<code>AQS</code> 内部用一个 <code>state</code> 变量同时支持读写状态。</td>
</tr>
</tbody></table>
<h3 id="Fork-Join-框架"><a href="#Fork-Join-框架" class="headerlink" title="Fork&#x2F;Join 框架"></a>Fork&#x2F;Join 框架</h3><p>大任务分解为小任务，高效地执行可分解为更小子任务的并行任务。它基于 “分而治之 (Divide and Conquer)” 的思想，并结合了 “工作窃取 (Work-Stealing)” 算法来提高处理器利用率。</p>
<p>Fork（分解）： 一个大的任务（通常是计算密集型任务）如果太大而无法直接处理，或者可以被分解成多个独立的、更小的子任务。这些子任务会递归地继续分解，直到它们足够小，可以直接被计算（被称为“基线条件”或“最小任务”）。</p>
<p>Join（合并）： 当子任务完成其计算后，它们的结果会合并回它们的父任务，直到所有子任务的结果都被合并，最终得到原始大任务的结果。</p>
<p><strong>工作窃取 (Work-Stealing) 算法： 这是 ForkJoinPool 区别于其他线程池的关键</strong>。</p>
<p>在其他线程池中，通常是任务队列由多个工作线程共享。</p>
<p>在 ForkJoinPool 中，每个工作线程都有自己的双端队列 (Deque)。</p>
<p><strong>当一个工作线程完成自己队列中的所有任务时，它不会闲置，而是会尝试从其他工作线程的队列的尾部（FIFO）“窃取”任务来执行。</strong>也就是做的快的人抢做的慢的人的工作。</p>
<p>当线程需要创建子任务时，它会将子任务放到自己队列的头部（LIFO），因为本地的 LIFO 访问更高效（CPU 缓存友好）。</p>
<p>优点： 减少了锁竞争（因为大多数时候线程操作自己的队列），提高了处理器利用率，特别适合处理递归分解的任务。它能够有效地<strong>平衡各个线程的负载，减少空闲时间</strong>。</p>
<h3 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h3><p>线程局部变量，线程局部变量就是<strong>只属于当前线程的变量</strong>，每个线程都拥有该变量的独立副本，可用于会话管理（获取userId）。</p>
<p>实现原理：</p>
<ol>
<li><strong>每个线程 (Thread) 都有一个 <code>ThreadLocalMap</code> 对象：</strong><ul>
<li>在 <code>Thread</code> 类中，有一个叫做 <code>threadLocals</code> 的成员变量，它的类型是 <code>ThreadLocal.ThreadLocalMap</code>。</li>
<li>这个 <code>ThreadLocalMap</code> 是一个<strong>弱引用 (WeakReference)</strong> 键的 <code>HashMap</code>，其键是 <code>ThreadLocal</code> 对象本身，值是你存储的业务数据。</li>
<li><strong><code>ThreadLocalMap</code> 存储在 <code>Thread</code> 对象内部，而不是 <code>ThreadLocal</code> 对象内部。</strong> 这意味着只要线程不销毁，它所关联的 <code>ThreadLocalMap</code> 就会一直存在。</li>
</ul>
</li>
<li><strong><code>ThreadLocalMap</code> 的键是 <code>ThreadLocal</code> 对象的弱引用：</strong><ul>
<li><code>ThreadLocalMap</code> 的内部 Entry 继承了 <code>WeakReference&lt;ThreadLocal&lt;?&gt;&gt;</code>。这意味着 Entry 会在内存紧张时自动垃圾回收掉，而不会导致 <code>ThreadLocal</code> 对象一直被引用。</li>
<li><strong>但是，Entry 的值（你实际存储的数据）是强引用。</strong></li>
</ul>
</li>
</ol>
<p><strong>ThreadLocal的内存泄漏问题：</strong></p>
<p>如上所述，ThreadLocalMap 的键使用了弱引用，而值是强引用。</p>
<p>弱引用键： 当一个 ThreadLocal 对象不再被外部强引用时，即使它还在 ThreadLocalMap 中被作为弱引用键引用，垃圾回收器也可以将其回收。</p>
<p>强引用值： 但是，ThreadLocalMap 中的值（你存储的数据）是强引用。这意味着即使键（ThreadLocal 对象）被回收了，值仍然留在 ThreadLocalMap 中，除非键对应的值也被回收或者手动移除。</p>
<p>如果线程（特别是线程池中的工作线程）被复用，但没有调用 remove() 方法，那么旧的 Entry（即使键是 null 但值还在）会一直留在 ThreadLocalMap 中，导致内存不断累积，最终发生内存泄漏。</p>
<p><strong>解决方案：务必在 finally 块中调用 threadLocal.remove() 方法。 这可以确保在业务逻辑执行完毕后，无论是否发生异常，都能够清除线程局部变量，避免内存泄漏。</strong></p>
<h3 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h3><p>实现原理：Worker 是 ThreadPoolExecutor 实现的核心。它既是一个 Runnable，又是一个 Thread 的持有者。每个worker都是一个线程，一个 Worker 线程一旦被创建，它就一直活着，不断地从队列里取任务、执行任务，而不是执行完一个任务就销毁（线程复用，避免线程对象的频繁创建和销毁带来的性能损耗）。</p>
<p>ExecutorService接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建固定大小的线程池</span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">fixedThreadPool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建缓存线程池</span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">cachedThreadPool</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建单线程线程池</span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">singleThreadExecutor</span> <span class="operator">=</span> Executors.newSingleThreadExecutor();</span><br></pre></td></tr></table></figure>

<p>newCachedThreadPool：灵活回收和创建线程，最大任务量：Integer.MAX_VALUE，但是一般需要严格控制任务数量，以免系统不稳定。</p>
<p>newFixedThreadPool：任务超过最大数目时候放入池队列中。缺点是无任务时不会释放线程，占用系统资源。</p>
<p>newSingleThreadExecutor：单线程化，确保所有任务按序进行。</p>
<p><code>submit()</code>：提交一个任务（返回 <code>Future</code>），可以获取任务的返回值和捕获异常。</p>
<p><code>execute()</code>：提交一个任务（没有返回值），用于没有返回结果的任务。</p>
<p><code>shutdown()</code>：关闭线程池，停止接收新任务，已经提交的任务会继续执行完毕。</p>
<table>
<thead>
<tr>
<th align="left">特性</th>
<th align="left"><code>execute(Runnable command)</code></th>
<th align="left"><code>submit(Runnable task)</code></th>
<th align="left"><code>submit(Callable&lt;T&gt; task)</code></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>参数类型</strong></td>
<td align="left">只能接受 <code>Runnable</code> 类型的任务。</td>
<td align="left">接受 <code>Runnable</code> 类型的任务。</td>
<td align="left">接受 <code>Callable&lt;T&gt;</code> 类型的任务。</td>
</tr>
<tr>
<td align="left"><strong>返回值</strong></td>
<td align="left">**无返回值 (void)**。</td>
<td align="left">返回一个 <code>Future&lt;?&gt;</code> 对象。</td>
<td align="left">返回一个 <code>Future&lt;T&gt;</code> 对象，其中 <code>T</code> 是 <code>Callable</code> 的返回类型。</td>
</tr>
<tr>
<td align="left"><strong>异常处理</strong></td>
<td align="left">任务执行中抛出的异常，如果未被任务内部捕获，会直接抛到线程池的执行线程中，导致线程中断或终止，并通过未捕获异常处理器（<code>UncaughtExceptionHandler</code>）处理，或者打印到控制台（默认行为）。<strong>调用者无法直接捕获任务执行时的异常。</strong></td>
<td align="left">任务执行中抛出的异常，会被 <code>Future</code> 对象捕获。<strong>调用者可以通过 <code>Future.get()</code> 方法来获取异常。</strong>如果 <code>Future.get()</code> 未调用，或者调用时没有处理，异常可能会被吞噬。</td>
<td align="left">任务执行中抛出的异常，会被 <code>Future</code> 对象捕获。<strong>调用者可以通过 <code>Future.get()</code> 方法来获取异常。</strong></td>
</tr>
<tr>
<td align="left"><strong>阻塞&#x2F;非阻塞</strong></td>
<td align="left">提交任务是非阻塞的。</td>
<td align="left">提交任务是非阻塞的。获取结果（<code>Future.get()</code>) 可能是阻塞的。</td>
<td align="left">提交任务是非阻塞的。获取结果（<code>Future.get()</code>) 可能是阻塞的。</td>
</tr>
<tr>
<td align="left"><strong>目的</strong></td>
<td align="left">简单地执行一个任务，不关心任务的执行结果或异常。</td>
<td align="left">提交一个需要获取执行结果或捕获异常的任务。</td>
<td align="left">提交一个需要获取执行结果或捕获异常的任务。</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo11</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ExecutorService pool= Executors.newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">            pool.submit(()-&gt;&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;A&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">10</span>;i&lt;<span class="number">20</span>;i++)&#123;</span><br><span class="line">            pool.execute(()-&gt;&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;B&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//输出结果为thread只有1,2,3，对应着固定大小3个线程</span></span><br><span class="line">        <span class="comment">//并不是严格按照“先 A 后 B”的顺序执行，而是根据线程池的工作机制并发执行的。</span></span><br><span class="line">        pool.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Future;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo12</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        ExecutorService e= Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line">        Future&lt;Integer&gt; future=e.submit(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>+<span class="number">2</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(future.get());</span><br><span class="line">        e.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还可以使用ThreadPoolExecutor，你需要自定义线程池参数（核心线程数、最大线程数、队列类型）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ThreadPoolExecutor</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="type">int</span> corePoolSize,                // 核心线程数</span></span><br><span class="line"><span class="params">    <span class="type">int</span> maximumPoolSize,             // 最大线程数</span></span><br><span class="line"><span class="params">    <span class="type">long</span> keepAliveTime,              // 空闲线程最大存活时间</span></span><br><span class="line"><span class="params">    TimeUnit unit,                   // 存活时间单位（秒、毫秒等）</span></span><br><span class="line"><span class="params">    BlockingQueue&lt;Runnable&gt; workQueue,  // 任务队列（阻塞队列），用来存放线程任务</span></span><br><span class="line"><span class="params">    ThreadFactory threadFactory,     // 线程工厂，创建线程用</span></span><br><span class="line"><span class="params">    RejectedExecutionHandler handler // 拒绝策略（即当任务队列已满，且线程池中的线程数量达到最大线程数时，如何处理新提交的任务）</span></span><br><span class="line"><span class="params">)</span></span><br></pre></td></tr></table></figure>

<p>常用的阻塞队列：</p>
<p><img src="image-20250727135255485.png"></p>
<p>LinkedBlockingQueue：无界FIFO队列。对应Fixed池，线程数固定，任务可能很多需要保存。</p>
<p>SynchronousQueue：不存储元素，容量为0。对应Cache池，线程数无限，一旦有任务直接执行无需保存。</p>
<p>DelayQueue：内部任务按照延迟时间长短排序。</p>
<p>拒绝策略有四种：</p>
<ul>
<li><code>AbortPolicy</code>： 抛出 <code>RejectedExecutionException</code> 异常（<strong>默认策略</strong>）。</li>
<li><code>CallerRunsPolicy</code>： 由提交任务的线程来执行该任务。</li>
<li><code>DiscardPolicy</code>： 直接丢弃该任务，不做任何处理。</li>
<li><code>DiscardOldestPolicy</code>： 丢弃队列中最老的任务，然后尝试将新任务添加到队列中。</li>
</ul>
<p><img src="image-20250727134602253.png"></p>
<p>下面是一个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.threaduse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ArrayBlockingQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo13</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ThreadPoolExecutor e=<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">                <span class="number">2</span>,</span><br><span class="line">                <span class="number">4</span>,</span><br><span class="line">                <span class="number">60</span>, TimeUnit.SECONDS,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">2</span>),</span><br><span class="line">                Executors.defaultThreadFactory(),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.CallerRunsPolicy()</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1000</span>;i++)&#123;</span><br><span class="line">            e.submit(()-&gt;&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName());</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        e.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="AQS"><a href="#AQS" class="headerlink" title="AQS"></a>AQS</h3><p>AQS 是一个用于构建锁和同步器的框架。AQS 本身是一个抽象类，它提供了同步器实现的基本框架，但具体如何管理 state 以及如何判断资源是否可用，则留给子类去实现。<strong>这是一种典型的模板方法模式</strong>。Java 中几乎所有重量级的并发同步器都是基于 AQS 实现的。</p>
<p>模板方法（Template Methods）：AQS 本身是一个抽象类，它定义了一套用于实现同步器的骨架方法，但将具体的同步逻辑（如何获取&#x2F;释放资源，以及如何判断资源是否可用）留给子类去实现。</p>
<p>抽象方法，供子类重写：</p>
<ul>
<li><code>tryAcquire(int arg)</code>: 尝试以独占模式获取资源。</li>
<li><code>tryRelease(int arg)</code>: 尝试以独占模式释放资源。</li>
<li><code>tryAcquireShared(int arg)</code>: 尝试以共享模式获取资源。</li>
<li><code>tryReleaseShared(int arg)</code>: 尝试以共享模式释放资源。</li>
<li><code>isHeldExclusively()</code>: 在独占模式下，判断当前线程是否持有资源。</li>
</ul>
<p>其他内容：</p>
<p>一个<strong>整型的 state 变量： 用来表示同步状态</strong>。例如，对于独占锁，state&#x3D;0 表示未锁定，state&#x3D;1 表示已锁定；对于信号量，state 表示当前可用的许可证数量。CAS（Compare-And-Swap）操作： 用于原子地修改 state 变量和队列结构，确保线程安全。</p>
<p>AQS维护一个<strong>同步队列（双向链表）</strong>，这个队列遵循 FIFO 原则，保证了等待线程的公平性。每个 Node 对象代表一个等待队列中的线程，并包含与该线程相关的信息。</p>
<p>AQS的工作模式&#x2F;资源共享方式：独占（只有一个线程能执行），共享（多个线程可同时执行）。</p>
<h3 id="Atomic"><a href="#Atomic" class="headerlink" title="Atomic"></a>Atomic</h3><p>原子：一个操作不可间断，一个线程的操作一旦开始就不会被其他线程干扰。</p>
<p>基本类型原子类：如AtomicInteger： 原子地操作 int 类型的值。</p>
<p>数组类型原子类：如AtomicIntegerArray： 原子地操作 int 数组中的元素。</p>
<p>引用类型原子类：</p>
<p><code>AtomicReference&lt;V&gt;</code>： 原子地操作引用类型对象。可以原子地更新一个对象的引用。</p>
<p><code>AtomicStampedReference&lt;V&gt;</code>： 解决了 ABA 问题。它通过一个“版本号”（或“戳”）来标记每次更新，只有当引用和版本号都匹配时才进行更新。</p>
<p><code>AtomicMarkableReference&lt;V&gt;</code>： 解决了 ABA 问题的另一种方式。它通过一个 boolean 标记来<strong>指示引用属性是否被修改过</strong>。</p>
<h3 id="同步-异步-阻塞-非阻塞-IO"><a href="#同步-异步-阻塞-非阻塞-IO" class="headerlink" title="同步&#x2F;异步&#x2F;阻塞&#x2F;非阻塞 IO"></a>同步&#x2F;异步&#x2F;阻塞&#x2F;非阻塞 IO</h3><p><strong>同步</strong>：调用者主动等待结果</p>
<ul>
<li>顺序执行，每一步都依赖上一步的结果</li>
<li>调用后必须等待操作完成才能继续</li>
</ul>
<p><strong>异步</strong>：调用者不等待结果</p>
<ul>
<li>调用后立即返回，<strong>结果通过回调&#x2F;通知获得</strong></li>
<li>不阻塞当前执行流</li>
</ul>
<p><strong>阻塞</strong>：调用者被挂起等待</p>
<ul>
<li>线程无法做其他事情直到操作完成</li>
<li>资源（线程）被占用不能释放</li>
</ul>
<p><strong>非阻塞</strong>：调用者不被挂起</p>
<ul>
<li>操作<strong>立即返回状态（成功&#x2F;失败&#x2F;进行中）</strong></li>
<li>线程可以继续做其他事情</li>
</ul>
<p><strong>同步阻塞</strong>：常规文件读取，线程被挂起等待。</p>
<p><strong>同步非阻塞</strong>：需要轮询检查状态，由于非阻塞立即返回状态（成功&#x2F;失败&#x2F;进行中），且同步不通过回调&#x2F;通知获得，所以只能轮询。不过在轮询过程中还是能做其他事情。</p>
<p><strong>异步非阻塞</strong>：发起调用立即返回（不等待结果），操作完成后通过回调通知结果。</p>
<h2 id="动态规划（DP）初步"><a href="#动态规划（DP）初步" class="headerlink" title="动态规划（DP）初步"></a>动态规划（DP）初步</h2><p>经典题目，三角形路径和。Leetcode120。</p>
<p>给定一个三角形 <code>triangle</code> ，找出自顶向下的最小路径和。</p>
<p>每一步只能移动到下一行中相邻的结点上。<strong>相邻的结点</strong> 在这里指的是 <strong>下标</strong> 与 <strong>上一层结点下标</strong> 相同或者等于 <strong>上一层结点下标 + 1</strong> 的两个结点。也就是说，如果正位于当前行的下标 <code>i</code> ，那么下一步可以移动到下一行的下标 <code>i</code> 或 <code>i + 1</code> 。</p>
<p><strong>示例 1：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">输入：triangle = [[2],[3,4],[6,5,7],[4,1,8,3]]</span><br><span class="line">输出：11</span><br><span class="line">解释：如下面简图所示：</span><br><span class="line">   2</span><br><span class="line">  3 4</span><br><span class="line"> 6 5 7</span><br><span class="line">4 1 8 3</span><br><span class="line">自顶向下的最小路径和为 11（即，2 + 3 + 5 + 1 = 11）。</span><br></pre></td></tr></table></figure>

<p><strong>示例 2：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：triangle = [[-10]]</span><br><span class="line">输出：-10</span><br></pre></td></tr></table></figure>

<p>我的解法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimumTotal</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; triangle)</span> &#123;</span><br><span class="line">        <span class="type">int</span> len=triangle.size();</span><br><span class="line">        <span class="type">int</span>[] l=<span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">            l[i]=triangle.get(len-<span class="number">1</span>).get(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(len&gt;=<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;len-<span class="number">1</span>;i++)&#123;</span><br><span class="line">                l[i]=Math.min(l[i],l[i+<span class="number">1</span>])+triangle.get(len-<span class="number">2</span>).get(i);</span><br><span class="line">            &#125;</span><br><span class="line">            len--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> l[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>参考教程：<a target="_blank" rel="noopener" href="https://blog.csdn.net/baidu_28312631/article/details/47418773?ops_request_misc=%7B%22request_id%22:%225e976853290a92925268eab491420aab%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=5e976853290a92925268eab491420aab&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-2-47418773-null-null.142%5Ev102%5Epc_search_result_base7&utm_term=%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92&spm=1018.2226.3001.4187">教你彻底学会动态规划——入门篇-CSDN博客</a></p>
<h2 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.list;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InitList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, <span class="literal">null</span>);</span><br><span class="line">        ListNode curr=head;</span><br><span class="line">        ListNode prev=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            prev=curr;</span><br><span class="line">            curr=<span class="keyword">new</span> <span class="title class_">ListNode</span>(i, <span class="literal">null</span>);</span><br><span class="line">            prev.next=curr;</span><br><span class="line">        &#125;</span><br><span class="line">        curr=head;</span><br><span class="line">        <span class="keyword">while</span> (curr!=<span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(curr.val);</span><br><span class="line">            curr=curr.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> val;</span><br><span class="line">    <span class="keyword">public</span> ListNode next;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ListNode</span><span class="params">(<span class="type">int</span> val, ListNode next)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">        <span class="built_in">this</span>.next=next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="反转链表的迭代和递归解法"><a href="#反转链表的迭代和递归解法" class="headerlink" title="反转链表的迭代和递归解法"></a>反转链表的迭代和递归解法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(head==<span class="literal">null</span>||head.next==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode newHead=reverseList(head.next);</span><br><span class="line">        head.next.next=head;</span><br><span class="line">        head.next=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span> newHead;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        ListNode curr=head;</span><br><span class="line">        ListNode prev=<span class="literal">null</span>;</span><br><span class="line">        ListNode next=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span> (curr!=<span class="literal">null</span>) &#123;</span><br><span class="line">            next=curr.next;</span><br><span class="line">            curr.next=prev;</span><br><span class="line">            prev=curr;</span><br><span class="line">            curr=next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="约瑟夫环问题"><a href="#约瑟夫环问题" class="headerlink" title="约瑟夫环问题"></a>约瑟夫环问题</h2><p>社团共有 <code>num</code> 位成员参与破冰游戏，编号为 <code>0 ~ num-1</code>。成员们按照编号顺序围绕圆桌而坐。社长抽取一个数字 <code>target</code>，从 0 号成员起开始计数，排在第 <code>target</code> 位的成员离开圆桌，且成员离开后从下一个成员开始计数。请返回游戏结束时最后一位成员的编号。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">iceBreakingGame</span><span class="params">(<span class="type">int</span> num, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> f(num,target);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> num,<span class="type">int</span> target)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(num==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> x=f(num-<span class="number">1</span>,target);</span><br><span class="line">        <span class="keyword">return</span> ((target-<span class="number">1</span>)%num + <span class="number">1</span> + x)%num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们有n个数，下标从0到n-1，然后从<code>index=0</code>开始数，每次数m个数，最后看能剩下谁。我们假设能剩下的数的<strong>下标</strong>为y，则我们把这件事表示为</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f(<span class="name">n</span>,m) = y</span><br></pre></td></tr></table></figure>

<p><code>f(n-1,m)=x</code>意味着啥呢？意味着有n-1个数的时候从<code>index=0</code>开始数，数x+1个数你就找到这结果了。那我不从<code>index=0</code>开始数呢？比如我从<code>index=i</code>开始数？那很简单，你把上面的答案也往后挪i下，就得到答案了。</p>
<p><strong>问题一</strong>：有n个数的时候，划掉了谁？<strong>下标</strong>是多少？</p>
<p>因为要从0数m个数，那最后肯定落到了下标为m-1的数身上了，但这个下标可能超过我们有的最大下标（n-1）了。所以攒满n个就归零接着数，逢n归零，所以要模n。</p>
<p>所以有n个数的时候，我们划掉了下标为<code>(m-1)%n</code>的数字。</p>
<p><strong>问题二</strong>：我们划完了这个数，往后数x+1下，能落到谁身上呢，它的下标是几？</p>
<p>你往后数x+1，它下标肯定变成了<code>(m-1)%n +x+1</code>，和第一步的想法一样，你肯定还是得取模，所以答案为<code>[(m-1)%n+x+1]%n</code>，则</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">f</span><span class="params">(n,m)</span>=[<span class="params">(m-<span class="number">1</span>)</span>%<span class="title">n</span>+<span class="title">x</span>+1]%<span class="title">n</span></span></span><br></pre></td></tr></table></figure>

<p>其中<code>x=f(n-1,m)</code>。</p>
<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><p>参考教程：<a target="_blank" rel="noopener" href="https://blog.csdn.net/2302_78684687/article/details/138389058?fromshare=blogdetail&sharetype=blogdetail&sharerId=138389058&sharerefer=PC&sharesource=qq_45644707&sharefrom=from_link">https://blog.csdn.net/2302_78684687/article/details/138389058?fromshare=blogdetail&amp;sharetype=blogdetail&amp;sharerId=138389058&amp;sharerefer=PC&amp;sharesource=qq_45644707&amp;sharefrom=from_link</a></p>
<p>左右都走，一轮交换一次，最后一轮交换，注意，基准值 key 在左边， right 小兵先走；基准值 key 在右边，left 小兵先走。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.sort;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Quick</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[] a = &#123; <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        quickSort(<span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x : a) &#123;</span><br><span class="line">            System.out.println(x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (left &gt;= right) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> partition(left, right);</span><br><span class="line">        quickSort(left, pivot - <span class="number">1</span>);</span><br><span class="line">        quickSort(pivot + <span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> a[left];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> left;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> right;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; j &amp;&amp; a[j] &gt;= pivot)</span><br><span class="line">                j--;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; j &amp;&amp; a[i] &lt;= pivot)</span><br><span class="line">                i++;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> a[i];</span><br><span class="line">                a[i] = a[j];</span><br><span class="line">                a[j] = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> a[i];</span><br><span class="line">        a[i] = a[left];</span><br><span class="line">        a[left] = tmp;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>挖坑法，注意，hole坑在最左边的时候，right先走。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.rzg.sort;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Quick</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[] a = &#123; <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        quickSort(<span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x : a) &#123;</span><br><span class="line">            System.out.println(x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (left &gt;= right) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> partition(left, right);</span><br><span class="line">        quickSort(left, pivot - <span class="number">1</span>);</span><br><span class="line">        quickSort(pivot + <span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> a[left];</span><br><span class="line">        <span class="type">int</span> hole=left;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> left;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> right;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;j)&#123;</span><br><span class="line">            <span class="keyword">while</span>(i&lt;j&amp;&amp;a[j]&gt;=pivot) &#123;</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            a[hole]=a[j];</span><br><span class="line">            hole=j;</span><br><span class="line">            <span class="keyword">while</span> (i&lt;j&amp;&amp;a[i]&lt;=pivot) &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            a[hole]=a[i];</span><br><span class="line">            hole=i;</span><br><span class="line">        &#125;</span><br><span class="line">        a[hole]=pivot;</span><br><span class="line">        <span class="keyword">return</span> hole;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="树"><a href="#树" class="headerlink" title="树"></a>树</h2><h3 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h3><p>二叉树的最近公共祖先：定义 boolean dfs(x,p,q) 表示 <em>x</em> 节点的子树中是否包含 <em>p</em> 节点或 <em>q</em> 节点：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> TreeNode ans=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> &#123;</span><br><span class="line">        dfs(root, p, q);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">boolean</span> l=dfs(root.left, p, q);</span><br><span class="line">        <span class="type">boolean</span> r=dfs(root.right, p, q);</span><br><span class="line">        <span class="keyword">if</span>((l&amp;&amp;r)||((l||r)&amp;&amp;(root.val==p.val||root.val==q.val)))&#123;</span><br><span class="line">            ans=root;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root.val==p.val||root.val==q.val||l||r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h3><p>一棵根节点为 <code>root</code> 的二叉树，请按照如下规则遍历val：</p>
<ul>
<li>第一层按照从左到右的顺序记录</li>
<li><strong>除第一层外每一层的记录顺序均与上一层相反</strong>。即第一层为从左到右，第二层为从右到左。</li>
</ul>
<p>层序遍历的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">decorateRecord</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; ans=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;</span><br><span class="line">        Deque&lt;TreeNode&gt; queue=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">boolean</span> inverse=<span class="literal">true</span>;</span><br><span class="line">        queue.add(root);</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            LinkedList&lt;Integer&gt; tmp = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">            <span class="type">int</span> size=queue.size();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;size;i++)&#123;</span><br><span class="line">                TreeNode node=queue.poll();</span><br><span class="line">                <span class="keyword">if</span>(inverse)&#123;</span><br><span class="line">                    tmp.addLast(node.val);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    tmp.addFirst(node.val);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(node.left != <span class="literal">null</span>) queue.add(node.left);</span><br><span class="line">                <span class="keyword">if</span>(node.right != <span class="literal">null</span>) queue.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">            inverse=!inverse;</span><br><span class="line">            ans.add(tmp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里的for循环就是树一层，每进入一次for循环就是进入树的下一层。</p>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../../tags/Java/" rel="tag">Java</a></li></ul></div><div class="post-nav"><a class="pre" href="../../15/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E7%AC%94%E8%AE%B0/">苍穹外卖笔记</a><a class="next" href="../../../06/21/SIP%E5%8D%8F%E8%AE%AE%E5%AE%9E%E9%AA%8C/">SIP协议实验</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://trenchance2022.github.io"/></form></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="About"><img class="nofancybox" src="/img/trenchance.jpg"/></a><p>Give it your best shot.</p><a class="info-icon" href="https://github.com/trenchance2022" title="Github" target="_blank" style="margin-inline:5px"><img class="nofancybox" src="../../../../img/github.png" style="width: 20px; height: 20px; margin-inline:5px; vertical-align: middle;"/></a><a class="info-icon" href="https://b23.tv/CPgDyCs" title="Bilibili" target="_blank" style="margin-inline:5px"><img class="nofancybox" src="../../../../img/bilibili.png" style="width: 20px; height: 20px; margin-inline:5px; vertical-align: middle;"/></a><a class="info-icon" href="https://www.xiaohongshu.com/user/profile/62bece15000000001b027298" title="小红书" target="_blank" style="margin-inline:5px"><img class="nofancybox" src="../../../../img/xiaohongshu.png" style="width: 20px; height: 20px; margin-inline:5px; vertical-align: middle;"/></a><a class="info-icon" href="mailto:renzg2004@126.com" title="Email" target="_blank" style="margin-inline:5px"><img class="nofancybox" src="../../../../img/mail.png" style="width: 20px; height: 20px; margin-inline:5px; vertical-align: middle;"/></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="../../../../tags/SDN/" style="font-size: 15px;">SDN</a> <a href="../../../../tags/OpenFlow/" style="font-size: 15px;">OpenFlow</a> <a href="../../../../tags/%E7%8E%B0%E4%BB%A3%E4%BA%A4%E6%8D%A2%E5%8E%9F%E7%90%86/" style="font-size: 15px;">现代交换原理</a> <a href="../../../../tags/Java/" style="font-size: 15px;">Java</a> <a href="../../../../tags/SIP/" style="font-size: 15px;">SIP</a> <a href="../../../../tags/Spring-Boot/" style="font-size: 15px;">Spring Boot</a> <a href="../../../../tags/vue/" style="font-size: 15px;">vue</a> <a href="../../../../tags/MyBatis/" style="font-size: 15px;">MyBatis</a> <a href="../../../../tags/html/" style="font-size: 15px;">html</a> <a href="../../../../tags/css/" style="font-size: 15px;">css</a> <a href="../../../../tags/javascript/" style="font-size: 15px;">javascript</a> <a href="../../../../tags/axios/" style="font-size: 15px;">axios</a> <a href="../../../../tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 15px;">操作系统</a> <a href="../../../../tags/Redis/" style="font-size: 15px;">Redis</a> <a href="../../../../tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/" style="font-size: 15px;">计算机系统结构</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="../../15/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E7%AC%94%E8%AE%B0/">苍穹外卖笔记</a></li><li class="post-list-item"><a class="post-list-link" href="">Java-基础语法</a></li><li class="post-list-item"><a class="post-list-link" href="../../../06/21/SIP%E5%8D%8F%E8%AE%AE%E5%AE%9E%E9%AA%8C/">SIP协议实验</a></li><li class="post-list-item"><a class="post-list-link" href="../../../06/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E7%AC%94%E8%AE%B0/">计算机系统结构笔记</a></li><li class="post-list-item"><a class="post-list-link" href="../../../06/10/Spring-%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Spring-全栈开发学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="../../../05/17/SDN%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8EOpenFlow%E5%8D%8F%E8%AE%AE%E5%88%86%E6%9E%90/">SDN基本原理与OpenFlow协议分析</a></li><li class="post-list-item"><a class="post-list-link" href="../../../03/18/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/">操作系统课程设计</a></li><li class="post-list-item"><a class="post-list-link" href="../../../03/01/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/">前端笔记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://www.cnblogs.com/Asaka-QianXiang" title="Asaka-QianXiang" target="_blank">Asaka-QianXiang</a><ul></ul><a href="https://github.com/trenchance2022" title="友链招募中" target="_blank">友链招募中</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="../../../../." rel="nofollow">Trenchance's Home.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="../../../../js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="../../../../js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="https://unpkg.com/@fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="../../../../js/copycode.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="../../../../css/copycode.css?v=1.0.0"><script type="text/javascript" src="../../../../js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="../../../../js/smartresize.js?v=1.0.0"></script></div></body></html>